"use strict";(self.webpackChunkdermatologia_app=self.webpackChunkdermatologia_app||[]).push([[145],{9145:(P,m,r)=>{r.r(m),r.d(m,{AdminPanelComponent:()=>E});var p=r(2200),d=r(9417),g=r(9763),t=r(2615),i=r(3664),u=r(9330),_=r(8397),v=r(5114);function h(e,l){1&e&&(i.j41(0,"div")(1,"div",19)(2,"p",20),i.EFF(3,"Seleccione una opci\xf3n en la barra lateral para editar la Misi\xf3n/Visi\xf3n o ver el Historial de cambios."),i.k0s()()())}function b(e,l){1&e&&(i.j41(0,"span"),i.EFF(1,"Guardar"),i.k0s())}function k(e,l){1&e&&(i.j41(0,"span"),i.EFF(1,"Guardando..."),i.k0s())}function f(e,l){1&e&&(i.j41(0,"span"),i.EFF(1,"Guardar"),i.k0s())}function M(e,l){1&e&&(i.j41(0,"span"),i.EFF(1,"Guardando..."),i.k0s())}function x(e,l){if(1&e){const n=i.RV6();i.j41(0,"div")(1,"div",21)(2,"div",22)(3,"h6",15),i.EFF(4,"Contenido del sitio"),i.k0s(),i.j41(5,"div",16)(6,"button",23),i.bIt("click",function(){t.eBV(n);const s=i.XpG();return t.Njj(s.loadSettings())}),i.EFF(7,"Deshacer cambios"),i.k0s()()()(),i.j41(8,"div",24)(9,"div",25)(10,"div",26)(11,"div",27)(12,"h5",28),i.EFF(13,"Misi\xf3n"),i.k0s(),i.j41(14,"div",29)(15,"label",30),i.EFF(16,"Misi\xf3n"),i.k0s(),i.j41(17,"textarea",31),i.mxI("ngModelChange",function(s){t.eBV(n);const a=i.XpG();return i.DH7(a.mission,s)||(a.mission=s),t.Njj(s)}),i.k0s()(),i.j41(18,"div",16)(19,"button",32),i.bIt("click",function(){t.eBV(n);const s=i.XpG();return t.Njj(s.saveMission())}),t.qSk(),i.j41(20,"svg",33),i.nrm(21,"polyline",34),i.k0s(),i.DNE(22,b,2,0,"span",18)(23,k,2,0,"span",18),i.k0s(),t.joV(),i.j41(24,"button",35),i.bIt("click",function(){t.eBV(n);const s=i.XpG();return t.Njj(s.cancelMission())}),t.qSk(),i.j41(25,"svg",33),i.nrm(26,"line",36)(27,"line",37),i.k0s(),i.EFF(28," Cancelar "),i.k0s()()()()(),t.joV(),i.j41(29,"div",25)(30,"div",26)(31,"div",27)(32,"h5",28),i.EFF(33,"Visi\xf3n"),i.k0s(),i.j41(34,"div",29)(35,"label",38),i.EFF(36,"Visi\xf3n"),i.k0s(),i.j41(37,"textarea",39),i.mxI("ngModelChange",function(s){t.eBV(n);const a=i.XpG();return i.DH7(a.vision,s)||(a.vision=s),t.Njj(s)}),i.k0s()(),i.j41(38,"div",16)(39,"button",32),i.bIt("click",function(){t.eBV(n);const s=i.XpG();return t.Njj(s.saveVision())}),t.qSk(),i.j41(40,"svg",33),i.nrm(41,"polyline",34),i.k0s(),i.DNE(42,f,2,0,"span",18)(43,M,2,0,"span",18),i.k0s(),t.joV(),i.j41(44,"button",35),i.bIt("click",function(){t.eBV(n);const s=i.XpG();return t.Njj(s.cancelVision())}),t.qSk(),i.j41(45,"svg",33),i.nrm(46,"line",36)(47,"line",37),i.k0s(),i.EFF(48," Cancelar "),i.k0s()()()()()()()}if(2&e){const n=i.XpG();i.R7$(17),i.R50("ngModel",n.mission),i.Y8G("disabled",n.isSavingMission),i.R7$(2),i.Y8G("disabled",n.isSavingMission),i.R7$(3),i.Y8G("ngIf",!n.isSavingMission),i.R7$(),i.Y8G("ngIf",n.isSavingMission),i.R7$(),i.Y8G("disabled",n.isSavingMission),i.R7$(13),i.R50("ngModel",n.vision),i.Y8G("disabled",n.isSavingVision),i.R7$(2),i.Y8G("disabled",n.isSavingVision),i.R7$(3),i.Y8G("ngIf",!n.isSavingVision),i.R7$(),i.Y8G("ngIf",n.isSavingVision),i.R7$(),i.Y8G("disabled",n.isSavingVision)}}function C(e,l){1&e&&(i.j41(0,"div"),i.nrm(1,"app-audit-history"),i.k0s())}let E=(()=>{class e{http;toast;route;view="none";selectedEntity="";entities=[{key:"pacientes",label:"Pacientes"},{key:"secretarias",label:"Secretarias"},{key:"doctores",label:"Doctores"},{key:"administradores",label:"Administradores"}];onSelectEntity(n){this.selectedEntity=n}mission="";vision="";isSavingMission=!1;isSavingVision=!1;originalMission="";originalVision="";constructor(n,o,s){this.http=n,this.toast=o,this.route=s,this.loadSettings(),this.route.queryParams.subscribe(a=>{const c=a.view;("mission"===c||"history"===c)&&(this.view=c)})}loadSettings(){this.http.get("/api/settings/mission").subscribe({next:n=>{this.mission=n&&n.value?n.value:""},error:n=>console.error("Error loading mission",n)}),this.http.get("/api/settings/vision").subscribe({next:n=>{this.vision=n&&n.value?n.value:""},error:n=>console.error("Error loading vision",n)})}saveMission(){this.isSavingMission=!0,this.originalMission=this.originalMission||this.mission,this.http.put("/api/settings/mission",{value:this.mission}).subscribe({next:()=>{this.toast.show("Misi\xf3n guardada","success"),this.isSavingMission=!1,this.originalMission=this.mission},error:n=>{console.error("Error saving mission",n),this.toast.show("Error al guardar misi\xf3n","error"),this.isSavingMission=!1}})}cancelMission(){this.http.get("/api/settings/mission").subscribe({next:n=>{this.mission=n&&n.value?n.value:"",this.toast.show("Cambios descartados","success")},error:n=>{console.error("Error reloading mission",n),this.toast.show("Error al recargar misi\xf3n","error")}})}saveVision(){this.isSavingVision=!0,this.originalVision=this.originalVision||this.vision,this.http.put("/api/settings/vision",{value:this.vision}).subscribe({next:()=>{this.toast.show("Visi\xf3n guardada","success"),this.isSavingVision=!1,this.originalVision=this.vision},error:n=>{console.error("Error saving vision",n),this.toast.show("Error al guardar visi\xf3n","error"),this.isSavingVision=!1}})}cancelVision(){this.http.get("/api/settings/vision").subscribe({next:n=>{this.vision=n&&n.value?n.value:"",this.toast.show("Cambios descartados","success")},error:n=>{console.error("Error reloading vision",n),this.toast.show("Error al recargar visi\xf3n","error")}})}saveSettings(){this.http.put("/api/settings/mission",{value:this.mission}).subscribe({next:()=>{this.toast.show("Misi\xf3n guardada","success"),this.http.put("/api/settings/vision",{value:this.vision}).subscribe({next:()=>this.toast.show("Visi\xf3n guardada","success"),error:n=>{console.error("Error saving vision",n),this.toast.show("Error al guardar visi\xf3n","error")}})},error:n=>{console.error("Error saving mission",n),this.toast.show("Error al guardar misi\xf3n","error")}})}static \u0275fac=function(o){return new(o||e)(i.rXU(u.Qq),i.rXU(_.f),i.rXU(v.nX))};static \u0275cmp=i.VBU({type:e,selectors:[["app-admin-panel"]],decls:30,vars:7,consts:[[1,"admin-panel","d-flex","gap-3"],["aria-label","Men\xfa de administraci\xf3n",1,"admin-sidebar","p-2","d-flex","flex-column"],[1,"mb-2"],[1,"sidebar-box","mt-3",2,"flex","1"],[1,"list-group"],[1,"list-group-item","list-group-item-action","d-flex","align-items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"me-2"],["d","M12 2L2 7l10 5 10-5-10-5z"],["d","M2 17l10 5 10-5"],["d","M2 12l10 5 10-5"],["cx","12","cy","12","r","10"],["points","12 6 12 12 16 14"],[1,"sidebar-footer","mt-3"],[1,"flex-fill"],[1,"toolbar","d-flex","align-items-center","justify-content-between","p-2","mb-3","flex-wrap","gap-2"],[1,"m-0"],[1,"d-flex","gap-2"],[1,"btn","btn-outline-success",3,"click"],[4,"ngIf"],[1,"card","p-3"],[1,"mb-0","text-muted"],[1,"card","p-2","mb-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"row"],[1,"col-12","mb-3"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"form-group","mb-2"],["for","missionText",1,"visually-hidden"],["id","missionText","rows","6",1,"form-control",2,"width","100% !important","display","block","box-sizing","border-box","min-height","120px",3,"ngModelChange","ngModel","disabled"],[1,"btn","btn-success","btn-compact",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.4",1,"btn-icon"],["points","20 6 9 17 4 12","stroke-linecap","round","stroke-linejoin","round"],[1,"btn","btn-outline-secondary","btn-compact",3,"click","disabled"],["x1","18","y1","6","x2","6","y2","18","stroke-linecap","round","stroke-linejoin","round"],["x1","6","y1","6","x2","18","y2","18","stroke-linecap","round","stroke-linejoin","round"],["for","visionText",1,"visually-hidden"],["id","visionText","rows","6",1,"form-control",2,"width","100% !important","display","block","box-sizing","border-box","min-height","120px",3,"ngModelChange","ngModel","disabled"]],template:function(o,s){1&o&&(i.j41(0,"div",0)(1,"aside",1)(2,"h5",2),i.EFF(3,"Administraci\xf3n"),i.k0s(),i.j41(4,"div",3)(5,"div",4)(6,"button",5),i.bIt("click",function(){return s.view="mission"}),t.qSk(),i.j41(7,"svg",6),i.nrm(8,"path",7)(9,"path",8)(10,"path",9),i.k0s(),t.joV(),i.j41(11,"span"),i.EFF(12,"Misi\xf3n / Visi\xf3n"),i.k0s()(),i.j41(13,"button",5),i.bIt("click",function(){return s.view="history"}),t.qSk(),i.j41(14,"svg",6),i.nrm(15,"circle",10)(16,"polyline",11),i.k0s(),t.joV(),i.j41(17,"span"),i.EFF(18,"Historial de cambios"),i.k0s()()()(),i.nrm(19,"div",12),i.k0s(),i.j41(20,"main",13)(21,"div",14)(22,"h5",15),i.EFF(23,"Panel de Administraci\xf3n"),i.k0s(),i.j41(24,"div",16)(25,"button",17),i.bIt("click",function(){return s.loadSettings()}),i.EFF(26,"Recargar contenidos"),i.k0s()()(),i.DNE(27,h,4,0,"div",18)(28,x,49,12,"div",18)(29,C,2,0,"div",18),i.k0s()()),2&o&&(i.R7$(6),i.AVh("active","mission"===s.view),i.R7$(7),i.AVh("active","history"===s.view),i.R7$(14),i.Y8G("ngIf","none"===s.view),i.R7$(),i.Y8G("ngIf","mission"===s.view),i.R7$(),i.Y8G("ngIf","history"===s.view))},dependencies:[p.MD,p.bT,d.YN,d.me,d.BC,d.vS,g.N],styles:[".admin-panel[_ngcontent-%COMP%]{padding:1rem;gap:1rem}.entity-selector[_ngcontent-%COMP%]{margin-bottom:1.5rem}select[_ngcontent-%COMP%]{padding:.5rem;border-radius:4px;border:1px solid #4caf50}.sidebar-box[_ngcontent-%COMP%]{background:transparent;border-radius:8px;padding:12px}.admin-sidebar[_ngcontent-%COMP%]{width:240px;max-width:100%;position:sticky;top:0;height:fit-content;border-right:1px solid var(--border-color)}.admin-sidebar[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 8px}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{cursor:pointer}.list-group[_ngcontent-%COMP%]   .list-group-item.active[_ngcontent-%COMP%]{background:var(--brand-50);color:var(--brand-700)}.quick-actions[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.quick-actions[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex:0 0 20px}@media (max-width: 991px){.admin-panel[_ngcontent-%COMP%]{flex-direction:column}.admin-sidebar[_ngcontent-%COMP%]{width:100%;border-right:none;border-bottom:1px solid var(--border-color)}}"]})}return e})()}}]);
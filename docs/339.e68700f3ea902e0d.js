"use strict";(self.webpackChunkdermatologia_app=self.webpackChunkdermatologia_app||[]).push([[339],{6339:(w,_,c)=>{c.r(_),c.d(_,{AdminAppointmentsComponent:()=>x});var f=c(2200),m=c(9417),P=c(7468),C=c(7673),p=c(3423),s=c(2615),t=c(3664),F=c(547),k=c(8397);function E(a,l){if(1&a){const n=t.RV6();t.j41(0,"button",43),t.bIt("click",function(){s.eBV(n);const e=t.XpG().$implicit,i=t.XpG();return s.Njj(i.openActionModal("confirm",e))}),t.EFF(1,"Confirmar"),t.k0s()}}function M(a,l){if(1&a){const n=t.RV6();t.j41(0,"button",44),t.bIt("click",function(){s.eBV(n);const e=t.XpG().$implicit,i=t.XpG();return s.Njj(i.openActionModal("cancel",e))}),t.EFF(1,"Cancelar"),t.k0s()}}function I(a,l){if(1&a&&(t.j41(0,"tr")(1,"td",34)(2,"div",35),t.EFF(3),t.k0s()(),t.j41(4,"td",36),t.EFF(5),t.k0s(),t.j41(6,"td",37),t.EFF(7),t.k0s(),t.j41(8,"td",38),t.EFF(9),t.k0s(),t.j41(10,"td",39)(11,"span",40),t.EFF(12),t.k0s()(),t.j41(13,"td",21),t.DNE(14,E,2,0,"button",41)(15,M,2,0,"button",42),t.k0s()()),2&a){const n=l.$implicit,o=t.XpG();t.R7$(),t.Y8G("title",(null!=n.pacienteInfo&&n.pacienteInfo.nombres?n.pacienteInfo.nombres+" "+(n.pacienteInfo.apellidos||""):n.pacienteNombre||n.paciente||(null==n.pacienteInfo?null:n.pacienteInfo.nombre)||(null==n.pacienteInfo?null:n.pacienteInfo.fullName))||"-"),t.R7$(2),t.JRh((null!=n.pacienteInfo&&n.pacienteInfo.nombres?n.pacienteInfo.nombres+" "+(n.pacienteInfo.apellidos||""):n.pacienteNombre||n.paciente||(null==n.pacienteInfo?null:n.pacienteInfo.nombre)||(null==n.pacienteInfo?null:n.pacienteInfo.fullName))||"-"),t.R7$(2),t.JRh(o.formatPhone(o.getPhone(n))),t.R7$(2),t.JRh((null==n.especialidadInfo?null:n.especialidadInfo.Nombre)||n.consulta_Especialidad||"-"),t.R7$(),t.Y8G("title",null!=n.doctorInfo&&n.doctorInfo.nombres?n.doctorInfo.nombres+" "+(n.doctorInfo.apellidos||""):n.profesional_Responsable||"-"),t.R7$(),t.JRh(null!=n.doctorInfo&&n.doctorInfo.nombres?n.doctorInfo.nombres+" "+(n.doctorInfo.apellidos||""):n.profesional_Responsable||"-"),t.R7$(2),t.Y8G("ngClass",o.getStatusClass(n)),t.R7$(),t.JRh(o.formatEstado(n)),t.R7$(2),t.Y8G("ngIf",o.isPendiente(n)),t.R7$(),t.Y8G("ngIf",o.isPendiente(n))}}function R(a,l){1&a&&(t.j41(0,"tr")(1,"td",45),t.EFF(2,"No hay citas hoy"),t.k0s()())}function j(a,l){if(1&a){const n=t.RV6();t.j41(0,"button",43),t.bIt("click",function(){s.eBV(n);const e=t.XpG().$implicit,i=t.XpG();return s.Njj(i.openActionModal("confirm",e))}),t.EFF(1,"Confirmar"),t.k0s()}}function O(a,l){if(1&a){const n=t.RV6();t.j41(0,"button",44),t.bIt("click",function(){s.eBV(n);const e=t.XpG().$implicit,i=t.XpG();return s.Njj(i.openActionModal("cancel",e))}),t.EFF(1,"Cancelar"),t.k0s()}}function y(a,l){if(1&a&&(t.j41(0,"tr")(1,"td",46),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"td",47),t.EFF(5),t.k0s(),t.j41(6,"td",34)(7,"div",35),t.EFF(8),t.k0s()(),t.j41(9,"td",36),t.EFF(10),t.k0s(),t.j41(11,"td",37),t.EFF(12),t.k0s(),t.j41(13,"td",38),t.EFF(14),t.k0s(),t.j41(15,"td",39)(16,"span",40),t.EFF(17),t.k0s()(),t.j41(18,"td",21),t.DNE(19,j,2,0,"button",41)(20,O,2,0,"button",42),t.k0s()()),2&a){const n=l.$implicit,o=t.XpG();t.R7$(2),t.JRh(t.i5U(3,12,n.fecha,"dd/MM/yyyy")),t.R7$(3),t.JRh(n.numero||n.CitaNumero||"-"),t.R7$(),t.Y8G("title",(null!=n.pacienteInfo&&n.pacienteInfo.nombres?n.pacienteInfo.nombres+" "+(n.pacienteInfo.apellidos||""):n.pacienteNombre||n.paciente||(null==n.pacienteInfo?null:n.pacienteInfo.nombre)||(null==n.pacienteInfo?null:n.pacienteInfo.fullName))||"-"),t.R7$(2),t.JRh((null!=n.pacienteInfo&&n.pacienteInfo.nombres?n.pacienteInfo.nombres+" "+(n.pacienteInfo.apellidos||""):n.pacienteNombre||n.paciente||(null==n.pacienteInfo?null:n.pacienteInfo.nombre)||(null==n.pacienteInfo?null:n.pacienteInfo.fullName))||"-"),t.R7$(2),t.JRh(o.formatPhone(o.getPhone(n))),t.R7$(2),t.JRh((null==n.especialidadInfo?null:n.especialidadInfo.Nombre)||"-"),t.R7$(),t.Y8G("title",null!=n.doctorInfo&&n.doctorInfo.nombres?n.doctorInfo.nombres+" "+(n.doctorInfo.apellidos||""):n.profesional_Responsable||"-"),t.R7$(),t.JRh(null!=n.doctorInfo&&n.doctorInfo.nombres?n.doctorInfo.nombres+" "+(n.doctorInfo.apellidos||""):n.profesional_Responsable||"-"),t.R7$(2),t.Y8G("ngClass",o.getStatusClass(n)),t.R7$(),t.JRh(o.formatEstado(n)),t.R7$(2),t.Y8G("ngIf",o.isPendiente(n)),t.R7$(),t.Y8G("ngIf",o.isPendiente(n))}}function $(a,l){1&a&&(t.j41(0,"tr")(1,"td",48),t.EFF(2,"No hay citas pr\xf3ximas"),t.k0s()())}function A(a,l){if(1&a){const n=t.RV6();t.j41(0,"tr")(1,"td",46),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"td",47),t.EFF(5),t.k0s(),t.j41(6,"td",34)(7,"div",35),t.EFF(8),t.k0s()(),t.j41(9,"td",36),t.EFF(10),t.k0s(),t.j41(11,"td",38),t.EFF(12),t.k0s(),t.j41(13,"td",37),t.EFF(14),t.k0s(),t.j41(15,"td",39)(16,"span",40),t.EFF(17),t.k0s()(),t.j41(18,"td",21)(19,"button",43),t.bIt("click",function(){const e=s.eBV(n).$implicit,i=t.XpG();return s.Njj(i.openActionModal("confirm",e))}),t.EFF(20,"Confirmar"),t.k0s(),t.j41(21,"button",44),t.bIt("click",function(){const e=s.eBV(n).$implicit,i=t.XpG();return s.Njj(i.openActionModal("cancel",e))}),t.EFF(22,"Cancelar"),t.k0s()()()}if(2&a){const n=l.$implicit,o=t.XpG();t.R7$(2),t.JRh(n.fecha?t.i5U(3,10,n.fecha,"dd/MM/yyyy"):"-"),t.R7$(3),t.JRh(n.numero||n.CitaNumero||"-"),t.R7$(),t.Y8G("title",(null!=n.pacienteInfo&&n.pacienteInfo.nombres?n.pacienteInfo.nombres+" "+(n.pacienteInfo.apellidos||""):n.pacienteNombre||n.paciente||(null==n.pacienteInfo?null:n.pacienteInfo.nombre)||(null==n.pacienteInfo?null:n.pacienteInfo.fullName))||"-"),t.R7$(2),t.JRh((null!=n.pacienteInfo&&n.pacienteInfo.nombres?n.pacienteInfo.nombres+" "+(n.pacienteInfo.apellidos||""):n.pacienteNombre||n.paciente||(null==n.pacienteInfo?null:n.pacienteInfo.nombre)||(null==n.pacienteInfo?null:n.pacienteInfo.fullName))||"-"),t.R7$(2),t.JRh(o.formatPhone(o.getPhone(n))),t.R7$(),t.Y8G("title",null!=n.doctorInfo&&n.doctorInfo.nombres?n.doctorInfo.nombres+" "+(n.doctorInfo.apellidos||""):n.profesional_Responsable||"-"),t.R7$(),t.JRh(null!=n.doctorInfo&&n.doctorInfo.nombres?n.doctorInfo.nombres+" "+(n.doctorInfo.apellidos||""):n.profesional_Responsable||"-"),t.R7$(2),t.JRh((null==n.especialidadInfo?null:n.especialidadInfo.Nombre)||"-"),t.R7$(2),t.Y8G("ngClass",o.getStatusClass(n)),t.R7$(),t.JRh(o.formatEstado(n))}}function T(a,l){1&a&&(t.j41(0,"tr")(1,"td",48),t.EFF(2,"No hay citas pendientes"),t.k0s()())}function v(a,l){if(1&a&&(t.j41(0,"tr")(1,"td",46),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"td",47),t.EFF(5),t.k0s(),t.j41(6,"td",34)(7,"div",35),t.EFF(8),t.k0s()(),t.j41(9,"td",36),t.EFF(10),t.k0s(),t.j41(11,"td",38),t.EFF(12),t.k0s(),t.j41(13,"td",37),t.EFF(14),t.k0s(),t.j41(15,"td",39)(16,"span",40),t.EFF(17),t.k0s()()()),2&a){const n=l.$implicit,o=t.XpG();t.R7$(2),t.JRh(n.fecha?t.i5U(3,10,n.fecha,"dd/MM/yyyy"):"-"),t.R7$(3),t.JRh(n.numero||n.CitaNumero||"-"),t.R7$(),t.Y8G("title",(null!=n.pacienteInfo&&n.pacienteInfo.nombres?n.pacienteInfo.nombres+" "+(n.pacienteInfo.apellidos||""):n.pacienteNombre||n.paciente||(null==n.pacienteInfo?null:n.pacienteInfo.nombre)||(null==n.pacienteInfo?null:n.pacienteInfo.fullName))||"-"),t.R7$(2),t.JRh((null!=n.pacienteInfo&&n.pacienteInfo.nombres?n.pacienteInfo.nombres+" "+(n.pacienteInfo.apellidos||""):n.pacienteNombre||n.paciente||(null==n.pacienteInfo?null:n.pacienteInfo.nombre)||(null==n.pacienteInfo?null:n.pacienteInfo.fullName))||"-"),t.R7$(2),t.JRh(o.formatPhone(o.getPhone(n))),t.R7$(),t.Y8G("title",null!=n.doctorInfo&&n.doctorInfo.nombres?n.doctorInfo.nombres+" "+(n.doctorInfo.apellidos||""):n.profesional_Responsable||"-"),t.R7$(),t.JRh(null!=n.doctorInfo&&n.doctorInfo.nombres?n.doctorInfo.nombres+" "+(n.doctorInfo.apellidos||""):n.profesional_Responsable||"-"),t.R7$(2),t.JRh((null==n.especialidadInfo?null:n.especialidadInfo.Nombre)||"-"),t.R7$(2),t.Y8G("ngClass",o.getStatusClass(n)),t.R7$(),t.JRh(o.formatEstado(n))}}function L(a,l){1&a&&(t.j41(0,"tr")(1,"td",49),t.EFF(2,"No hay citas confirmadas"),t.k0s()())}function G(a,l){if(1&a&&(t.j41(0,"tr")(1,"td",30),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"td",31),t.EFF(5),t.k0s(),t.j41(6,"td",50)(7,"div",35),t.EFF(8),t.k0s()(),t.j41(9,"td",36),t.EFF(10),t.k0s(),t.j41(11,"td",51),t.EFF(12),t.k0s(),t.j41(13,"td",35),t.EFF(14),t.k0s(),t.j41(15,"td",20)(16,"span",40),t.EFF(17),t.k0s()()()),2&a){const n=l.$implicit,o=t.XpG();t.R7$(2),t.JRh(n.fecha?t.i5U(3,10,n.fecha,"dd/MM/yyyy"):"-"),t.R7$(3),t.JRh(n.numero||n.CitaNumero||"-"),t.R7$(),t.Y8G("title",(null!=n.pacienteInfo&&n.pacienteInfo.nombres?n.pacienteInfo.nombres+" "+(n.pacienteInfo.apellidos||""):n.pacienteNombre||n.paciente||(null==n.pacienteInfo?null:n.pacienteInfo.nombre)||(null==n.pacienteInfo?null:n.pacienteInfo.fullName))||"-"),t.R7$(2),t.JRh((null!=n.pacienteInfo&&n.pacienteInfo.nombres?n.pacienteInfo.nombres+" "+(n.pacienteInfo.apellidos||""):n.pacienteNombre||n.paciente||(null==n.pacienteInfo?null:n.pacienteInfo.nombre)||(null==n.pacienteInfo?null:n.pacienteInfo.fullName))||"-"),t.R7$(2),t.JRh(o.formatPhone(o.getPhone(n))),t.R7$(),t.Y8G("title",null!=n.doctorInfo&&n.doctorInfo.nombres?n.doctorInfo.nombres+" "+(n.doctorInfo.apellidos||""):n.profesional_Responsable||"-"),t.R7$(),t.JRh(null!=n.doctorInfo&&n.doctorInfo.nombres?n.doctorInfo.nombres+" "+(n.doctorInfo.apellidos||""):n.profesional_Responsable||"-"),t.R7$(2),t.JRh((null==n.especialidadInfo?null:n.especialidadInfo.Nombre)||"-"),t.R7$(2),t.Y8G("ngClass",o.getStatusClass(n)),t.R7$(),t.JRh(o.formatEstado(n))}}function N(a,l){1&a&&(t.j41(0,"tr")(1,"td",49),t.EFF(2,"No hay citas canceladas"),t.k0s()())}function Y(a,l){if(1&a){const n=t.RV6();t.j41(0,"div",52)(1,"div",53)(2,"div",54),t.EFF(3,"Confirmar acci\xf3n"),t.k0s(),t.j41(4,"div",12)(5,"p"),t.EFF(6,"Vas a "),t.j41(7,"strong"),t.EFF(8),t.k0s(),t.EFF(9," la cita "),t.j41(10,"strong"),t.EFF(11),t.k0s(),t.EFF(12,"."),t.k0s(),t.j41(13,"div",55)(14,"div"),t.EFF(15),t.nI1(16,"date"),t.k0s(),t.j41(17,"div"),t.EFF(18),t.k0s(),t.j41(19,"div"),t.EFF(20),t.k0s()(),t.j41(21,"div",56)(22,"button",57),t.bIt("click",function(){s.eBV(n);const e=t.XpG();return s.Njj(e.performAction())}),t.EFF(23,"Aceptar"),t.k0s(),t.j41(24,"button",58),t.bIt("click",function(){s.eBV(n);const e=t.XpG();return s.Njj(e.closeActionModal())}),t.EFF(25,"Cerrar"),t.k0s()()()()()}if(2&a){const n=t.XpG();t.R7$(8),t.JRh("confirm"===n.actionType?"confirmar":"cancelar"),t.R7$(3),t.SpI("#",(null==n.actionTarget?null:n.actionTarget.idCitas)||(null==n.actionTarget?null:n.actionTarget.numero)||(null==n.actionTarget?null:n.actionTarget.CitaNumero)||(null==n.actionTarget?null:n.actionTarget.id)),t.R7$(4),t.SpI("Fecha: ",null!=n.actionTarget&&n.actionTarget.fecha?t.i5U(16,7,n.actionTarget.fecha,"dd/MM/yyyy"):"-"),t.R7$(3),t.SpI("Hora: ",(null==n.actionTarget?null:n.actionTarget.hora)||(null==n.actionTarget?null:n.actionTarget.Hora)||"-"),t.R7$(2),t.SpI("Tel\xe9fono paciente: ",n.formatPhone(n.getPhone(n.actionTarget))),t.R7$(2),t.Y8G("disabled",n.actionLoading),t.R7$(2),t.Y8G("disabled",n.actionLoading)}}let x=(()=>{class a{svc;toast;today=new Date;citasHoy=[];citasProximas=[];citasPendientes=[];citasConfirmadas=[];citasCanceladas=[];totalHoy=0;totalProx=0;totalPendientes=0;totalConfirmadas=0;totalCanceladas=0;page=1;limit=50;uiPageHoy=1;uiLimitHoy=10;uiPageProx=1;uiLimitProx=10;uiPagePend=1;uiLimitPend=10;uiPageConf=1;uiLimitConf=10;uiPageCanc=1;uiLimitCanc=10;actionModalOpen=!1;actionType=null;actionTarget=null;actionLoading=!1;searchTerm="";constructor(n,o){this.svc=n,this.toast=o}ngOnInit(){this.refreshAll()}refreshAll(){this.loadToday(),this.loadProximas(),this.loadByStatus("pendiente"),this.loadByStatus("confirmada"),this.loadByStatus("cancelada")}norm(n){try{return(n??"").toString().toLowerCase()}catch{return""}}citaToSearchText(n){if(!n)return"";const o=n.pacienteInfo?`${n.pacienteInfo.nombres||""} ${n.pacienteInfo.apellidos||""}`:n.pacienteNombre||n.paciente||n.pacienteInfo?.nombre||n.pacienteInfo?.fullName||"",e=n.doctorInfo?`${n.doctorInfo.nombres||""} ${n.doctorInfo.apellidos||""}`:n.profesional_Responsable||"",i=n.especialidadInfo?.Nombre||n.consulta_Especialidad||"",r=n.numero||n.CitaNumero||n.Cita_Numero||n.idCitas||n.id||"",u=this.getPhone(n)||"",d=this.formatEstado(n)||"";return this.norm(`${o} ${e} ${i} ${r} ${u} ${d} ${n.fecha||n.Fecha||""} ${n.hora||n.Hora||""}`)}filterList(n){const o=this.norm(this.searchTerm);return o?(n||[]).filter(e=>this.citaToSearchText(e).includes(o)):n||[]}get filteredHoy(){return this.filterList(this.citasHoy)}get filteredProx(){return this.filterList(this.citasProximas)}get filteredPend(){return this.filterList(this.citasPendientes)}get filteredConf(){return this.filterList(this.citasConfirmadas)}get filteredCanc(){return this.filterList(this.citasCanceladas)}toYMD(n){return n.toISOString().slice(0,10)}loadToday(){const n=this.toYMD(new Date);this.svc.getCitasPaged(1,this.limit,n).subscribe({next:o=>{this.citasHoy=(o?.data||[]).map(e=>(0,p.$)(e)),this.fetchMissingDates(this.citasHoy),this.totalHoy=o?.meta?.total??this.citasHoy.length,this.clampPage("hoy")},error:o=>console.error("loadToday",o)})}loadProximas(){const n=new Date;n.setDate(n.getDate()+1);const o=new Date;o.setDate(o.getDate()+7),this.svc.getCitasByRangePaged(this.toYMD(n),this.toYMD(o),1,this.limit).subscribe({next:e=>{this.citasProximas=(e?.data||[]).map(i=>(0,p.$)(i)),this.fetchMissingDates(this.citasProximas),this.totalProx=e?.meta?.total??this.citasProximas.length,this.clampPage("prox")},error:e=>console.error("loadProximas",e)})}loadByStatus(n){this.svc.getCitasByStatusPaged(n,1,this.limit).subscribe({next:o=>{const e=(o?.data||[]).map(i=>(0,p.$)(i));this.fetchMissingDates(e),"pendiente"===n&&(this.citasPendientes=e,this.totalPendientes=o?.meta?.total??e.length,this.clampPage("pend")),"confirmada"===n&&(this.citasConfirmadas=e,this.totalConfirmadas=o?.meta?.total??e.length,this.clampPage("conf")),"cancelada"===n&&(this.citasCanceladas=e,this.totalCanceladas=o?.meta?.total??e.length,this.clampPage("canc"))},error:o=>console.error("loadByStatus",n,o)})}fetchMissingDates(n){if(!Array.isArray(n)||0===n.length)return;const o=n.filter(i=>!!i&&!(!(i.idCitas||i.idcitas||i.id)||i.fecha&&"-"!==i.fecha&&(i.numero??i.CitaNumero??i.Cita_Numero??i.Cita_Num)));if(0===o.length)return;const e=o.map(i=>{const r=i.idCitas??i.idcitas??i.id??null;return r?this.svc.getAppointmentById(r).pipe():(0,C.of)(null)});(0,P.p)(e).subscribe(i=>{i.forEach((r,u)=>{if(!r)return;const d=r&&r.appointment?r.appointment:r;try{const g=d.idCitas??d.idcitas??d.id??null,b=n.findIndex(h=>(h.idCitas??h.idcitas??h.id)==g);if(b>=0){const h=(0,p.$)({...n[b],...d});n[b]=h}}catch(g){console.warn("fetchMissingDates merge failed",g)}})},i=>{console.warn("fetchMissingDates failed",i)})}getPhone(n){return n?n.pacienteInfo?.telefono??n.patientPhone??n.patientphone??n.pacienteTelefono??n.pacientePhone??n.telefono??null:null}formatPhone(n){if(!n&&0!==n)return"-";let o=String(n).trim();if(0===o.length)return"-";const e=o.startsWith("+");if(o=o.replace(/[^0-9]/g,""),0===o.length)return"-";let i=o;if(i.length<=4)return(e?"+":"")+i;const r=i.slice(-4);return(e?"+":"")+i.slice(0,-4)+" "+r}isPendiente(n){if(!n)return!1;const o=n.Confirmado??n.confirmado??n.estado??null;return null==o||("string"==typeof o?o.toLowerCase().includes("pend"):!o)}isConfirmada(n){const o=n.Confirmado??n.confirmado??n.estado??null;return null!=o&&("string"==typeof o&&o.toLowerCase().includes("conf")||!0===o)}isCancelada(n){const o=n.Confirmado??n.confirmado??n.estado??null;return null!=o&&("string"==typeof o&&o.toLowerCase().includes("can")||!1===o)}formatEstado(n){return this.isConfirmada(n)?"Confirmada":this.isCancelada(n)?"Cancelada":"Pendiente"}getStatusClass(n){return this.isConfirmada(n)?"status-confirmada":this.isCancelada(n)?"status-cancelada":"status-pendiente"}listLength(n){switch(n){case"hoy":return this.filteredHoy.length;case"prox":return this.filteredProx.length;case"pend":return this.filteredPend.length;case"conf":return this.filteredConf.length;case"canc":return this.filteredCanc.length}}getTotalPages(n){const o=this.getUiLimit(n),e=this.listLength(n);return Math.max(1,Math.ceil((e||0)/(o||1)))}getUiLimit(n){switch(n){case"hoy":return this.uiLimitHoy;case"prox":return this.uiLimitProx;case"pend":return this.uiLimitPend;case"conf":return this.uiLimitConf;case"canc":return this.uiLimitCanc}}getUiPage(n){switch(n){case"hoy":return this.uiPageHoy;case"prox":return this.uiPageProx;case"pend":return this.uiPagePend;case"conf":return this.uiPageConf;case"canc":return this.uiPageCanc}}setUiPage(n,o){switch(n){case"hoy":this.uiPageHoy=o;break;case"prox":this.uiPageProx=o;break;case"pend":this.uiPagePend=o;break;case"conf":this.uiPageConf=o;break;case"canc":this.uiPageCanc=o}}setUiLimit(n,o){switch(n){case"hoy":this.uiLimitHoy=o;break;case"prox":this.uiLimitProx=o;break;case"pend":this.uiLimitPend=o;break;case"conf":this.uiLimitConf=o;break;case"canc":this.uiLimitCanc=o}}clampPage(n){const o=this.getTotalPages(n),e=this.getUiPage(n)||1;e>o&&this.setUiPage(n,o),e<1&&this.setUiPage(n,1)}prevPage(n){const o=this.getUiPage(n)||1;o>1&&this.setUiPage(n,o-1)}nextPage(n){const o=this.getUiPage(n)||1;o<this.getTotalPages(n)&&this.setUiPage(n,o+1)}changeLimit(n,o){const e=Number(o)||10;this.setUiLimit(n,e),this.setUiPage(n,1)}openActionModal(n,o){this.actionType=n;const e=o?.idCitas??o?.idcitas??o?.id??o?.Id??o?.CitaId??o?.citaId??null;!e||o?.fecha||o?.Fecha||o?.hora||o?.Hora?(this.actionTarget=(0,p.$)(o),this.actionModalOpen=!0):(this.actionLoading=!0,this.svc.getAppointmentById(e).subscribe({next:i=>{try{const r=i&&i.appointment?i.appointment:i,u={...o,...r};this.actionTarget=(0,p.$)(u)}catch(r){console.warn("Failed to merge appointment details",r),this.actionTarget=(0,p.$)(o)}this.actionLoading=!1,this.actionModalOpen=!0},error:i=>{console.warn("Failed to fetch full appointment details",i),this.actionLoading=!1,this.actionTarget=(0,p.$)(o),this.actionModalOpen=!0}}))}closeActionModal(){this.actionModalOpen=!1,this.actionType=null,this.actionTarget=null,this.actionLoading=!1}performAction(){if(!this.actionType||!this.actionTarget)return;this.actionLoading=!0;const n=this.actionTarget.idCitas??this.actionTarget.id??this.actionTarget.Id??this.actionTarget.CitaId??this.actionTarget.citaId;if(!n)return this.toast.show("ID de cita no encontrado","error",3e3),void(this.actionLoading=!1);("confirm"===this.actionType?this.svc.confirmAppointment(n):this.svc.cancelAppointment(n)).subscribe({next:()=>{this.toast.show("confirm"===this.actionType?"Cita confirmada":"Cita cancelada","success",2500),this.actionLoading=!1,this.closeActionModal(),this.refreshAll()},error:e=>{console.error("performAction",e),this.toast.show("Error al procesar la acci\xf3n: "+(e?.error?.message||e?.message||e.statusText||"Error"),"error",5e3),this.actionLoading=!1}})}min(n,o){return Math.min(n,o)}static \u0275fac=function(o){return new(o||a)(t.rXU(F.h),t.rXU(k.f))};static \u0275cmp=t.VBU({type:a,selectors:[["app-admin-appointments"]],decls:256,vars:96,consts:[[1,"admin-appointments","p-2"],[1,"toolbar","d-flex","align-items-center","justify-content-between","p-2","mb-3","flex-wrap","gap-2"],[1,"m-0"],[1,"d-flex","align-items-center","gap-2","flex-wrap"],[1,"input-group"],["type","text","placeholder","Buscar por paciente, doctor, n\xfamero, estado...",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-outline-success",3,"click"],[1,"grid"],[1,"card","ficha"],[1,"card-header","card-header--brand"],[1,"muted"],[1,"badge"],[1,"card-body"],[1,"section-subtitle"],[1,"table-scroll"],[1,"table","table-sm","mb-1","app-table","app-table--minwidth","table-modern","table-card"],[1,"col-patient"],[1,"col-phone"],[1,"col-spec"],[1,"col-doctor"],[1,"col-status"],[1,"col-actions"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-footer","toolbar","p-2"],[1,"pager"],[1,"btn","btn-ghost",3,"click","disabled"],[1,"page-size"],[3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"col-date"],[1,"col-num"],[1,"table-footer"],["class","modal-overlay",4,"ngIf"],["data-label","Paciente",1,"patient-cell",3,"title"],[1,"text-wrap"],["data-label","Tel\xe9fono",1,"col-phone"],["data-label","Especialidad",1,"text-wrap"],["data-label","Doctor",1,"doctor-cell","text-wrap",3,"title"],["data-label","Estado",1,"col-status"],[1,"status-badge",3,"ngClass"],["type","button","class","btn btn-sm btn-accept me-1",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-cancel",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-accept","me-1",3,"click"],["type","button",1,"btn","btn-sm","btn-cancel",3,"click"],["colspan","6",1,"text-center","text-muted"],["data-label","Fecha",1,"col-date"],["data-label","N\xfamero",1,"col-num"],["colspan","8",1,"text-center","text-muted"],["colspan","7",1,"text-center","text-muted"],[1,"patient-cell",3,"title"],[1,"doctor-cell","text-wrap",3,"title"],[1,"modal-overlay"],[1,"modal","card"],[1,"card-header"],[1,"mb-2","small","text-muted"],[1,"card-footer"],["type","button",1,"btn","btn-sm","btn-accept","me-2",3,"click","disabled"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click","disabled"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h5",2),t.EFF(3,"Administraci\xf3n de Citas"),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"input",5),t.mxI("ngModelChange",function(r){return t.DH7(e.searchTerm,r)||(e.searchTerm=r),r}),t.k0s()(),t.j41(7,"button",6),t.bIt("click",function(){return e.refreshAll()}),t.EFF(8,"Refrescar"),t.k0s()()(),t.j41(9,"div",7)(10,"section",8)(11,"header",9),t.EFF(12,"Hoy "),t.j41(13,"small",10),t.EFF(14),t.nI1(15,"date"),t.k0s(),t.j41(16,"span",11),t.EFF(17),t.k0s()(),t.j41(18,"div",12)(19,"div",13),t.EFF(20),t.k0s(),t.j41(21,"div",14)(22,"table",15)(23,"thead")(24,"tr")(25,"th",16),t.EFF(26,"Paciente"),t.k0s(),t.j41(27,"th",17),t.EFF(28,"Tel\xe9fono"),t.k0s(),t.j41(29,"th",18),t.EFF(30,"Especialidad"),t.k0s(),t.j41(31,"th",19),t.EFF(32,"Doctor"),t.k0s(),t.j41(33,"th",20),t.EFF(34,"Estado"),t.k0s(),t.j41(35,"th",21),t.EFF(36,"Acciones"),t.k0s()()(),t.j41(37,"tbody"),t.DNE(38,I,16,10,"tr",22),t.nI1(39,"slice"),t.DNE(40,R,3,0,"tr",23),t.k0s()()(),t.j41(41,"div",24)(42,"div",25)(43,"button",26),t.bIt("click",function(){return e.prevPage("hoy")}),t.EFF(44,"Anterior"),t.k0s(),t.j41(45,"span"),t.EFF(46),t.k0s(),t.j41(47,"button",26),t.bIt("click",function(){return e.nextPage("hoy")}),t.EFF(48,"Siguiente"),t.k0s()(),t.j41(49,"div",27)(50,"label"),t.EFF(51,"Por p\xe1gina"),t.k0s(),t.j41(52,"select",28),t.bIt("ngModelChange",function(r){return e.changeLimit("hoy",r)}),t.j41(53,"option",29),t.EFF(54,"10"),t.k0s(),t.j41(55,"option",29),t.EFF(56,"20"),t.k0s(),t.j41(57,"option",29),t.EFF(58,"50"),t.k0s()()()()()(),t.j41(59,"section",8)(60,"header",9),t.EFF(61,"Pr\xf3ximos 7 d\xedas "),t.j41(62,"span",11),t.EFF(63),t.k0s()(),t.j41(64,"div",12)(65,"div",13),t.EFF(66),t.k0s(),t.j41(67,"div",14)(68,"table",15)(69,"thead")(70,"tr")(71,"th",30),t.EFF(72,"Fecha"),t.k0s(),t.j41(73,"th",31),t.EFF(74,"N\xfamero"),t.k0s(),t.j41(75,"th",16),t.EFF(76,"Paciente"),t.k0s(),t.j41(77,"th",17),t.EFF(78,"Tel\xe9fono"),t.k0s(),t.j41(79,"th",18),t.EFF(80,"Especialidad"),t.k0s(),t.j41(81,"th",19),t.EFF(82,"Doctor"),t.k0s(),t.j41(83,"th",20),t.EFF(84,"Estado"),t.k0s(),t.j41(85,"th",21),t.EFF(86,"Acciones"),t.k0s()()(),t.j41(87,"tbody"),t.DNE(88,y,21,15,"tr",22),t.nI1(89,"slice"),t.DNE(90,$,3,0,"tr",23),t.k0s()()(),t.j41(91,"div",24)(92,"div",25)(93,"button",26),t.bIt("click",function(){return e.prevPage("prox")}),t.EFF(94,"Anterior"),t.k0s(),t.j41(95,"span"),t.EFF(96),t.k0s(),t.j41(97,"button",26),t.bIt("click",function(){return e.nextPage("prox")}),t.EFF(98,"Siguiente"),t.k0s()(),t.j41(99,"div",27)(100,"label"),t.EFF(101,"Por p\xe1gina"),t.k0s(),t.j41(102,"select",28),t.bIt("ngModelChange",function(r){return e.changeLimit("prox",r)}),t.j41(103,"option",29),t.EFF(104,"10"),t.k0s(),t.j41(105,"option",29),t.EFF(106,"20"),t.k0s(),t.j41(107,"option",29),t.EFF(108,"50"),t.k0s()()()()()(),t.j41(109,"section",8)(110,"header",9),t.EFF(111,"Pendientes "),t.j41(112,"span",11),t.EFF(113),t.k0s()(),t.j41(114,"div",12)(115,"div",13),t.EFF(116),t.k0s(),t.j41(117,"div",14)(118,"table",15)(119,"thead")(120,"tr")(121,"th",30),t.EFF(122,"Fecha"),t.k0s(),t.j41(123,"th",31),t.EFF(124,"N\xfamero"),t.k0s(),t.j41(125,"th",16),t.EFF(126,"Paciente"),t.k0s(),t.j41(127,"th",17),t.EFF(128,"Tel\xe9fono"),t.k0s(),t.j41(129,"th",19),t.EFF(130,"Doctor"),t.k0s(),t.j41(131,"th",18),t.EFF(132,"Especialidad"),t.k0s(),t.j41(133,"th",20),t.EFF(134,"Estado"),t.k0s(),t.j41(135,"th",21),t.EFF(136,"Acciones"),t.k0s()()(),t.j41(137,"tbody"),t.DNE(138,A,23,13,"tr",22),t.nI1(139,"slice"),t.DNE(140,T,3,0,"tr",23),t.k0s()()(),t.j41(141,"div",24)(142,"div",25)(143,"button",26),t.bIt("click",function(){return e.prevPage("pend")}),t.EFF(144,"Anterior"),t.k0s(),t.j41(145,"span"),t.EFF(146),t.k0s(),t.j41(147,"button",26),t.bIt("click",function(){return e.nextPage("pend")}),t.EFF(148,"Siguiente"),t.k0s()(),t.j41(149,"div",27)(150,"label"),t.EFF(151,"Por p\xe1gina"),t.k0s(),t.j41(152,"select",28),t.bIt("ngModelChange",function(r){return e.changeLimit("pend",r)}),t.j41(153,"option",29),t.EFF(154,"10"),t.k0s(),t.j41(155,"option",29),t.EFF(156,"20"),t.k0s(),t.j41(157,"option",29),t.EFF(158,"50"),t.k0s()()()()()(),t.j41(159,"section",8)(160,"header",9),t.EFF(161,"Confirmadas "),t.j41(162,"span",11),t.EFF(163),t.k0s()(),t.j41(164,"div",12)(165,"div",13),t.EFF(166),t.k0s(),t.j41(167,"div",14)(168,"table",15)(169,"thead")(170,"tr")(171,"th",30),t.EFF(172,"Fecha"),t.k0s(),t.j41(173,"th",31),t.EFF(174,"N\xfamero"),t.k0s(),t.j41(175,"th",16),t.EFF(176,"Paciente"),t.k0s(),t.j41(177,"th",17),t.EFF(178,"Tel\xe9fono"),t.k0s(),t.j41(179,"th",19),t.EFF(180,"Doctor"),t.k0s(),t.j41(181,"th",18),t.EFF(182,"Especialidad"),t.k0s(),t.j41(183,"th",20),t.EFF(184,"Estado"),t.k0s()()(),t.j41(185,"tbody"),t.DNE(186,v,18,13,"tr",22),t.nI1(187,"slice"),t.DNE(188,L,3,0,"tr",23),t.k0s()()(),t.j41(189,"div",24)(190,"div",25)(191,"button",26),t.bIt("click",function(){return e.prevPage("conf")}),t.EFF(192,"Anterior"),t.k0s(),t.j41(193,"span"),t.EFF(194),t.k0s(),t.j41(195,"button",26),t.bIt("click",function(){return e.nextPage("conf")}),t.EFF(196,"Siguiente"),t.k0s()(),t.j41(197,"div",27)(198,"label"),t.EFF(199,"Por p\xe1gina"),t.k0s(),t.j41(200,"select",28),t.bIt("ngModelChange",function(r){return e.changeLimit("conf",r)}),t.j41(201,"option",29),t.EFF(202,"10"),t.k0s(),t.j41(203,"option",29),t.EFF(204,"20"),t.k0s(),t.j41(205,"option",29),t.EFF(206,"50"),t.k0s()()()()()(),t.j41(207,"section",8)(208,"header",9),t.EFF(209,"Canceladas "),t.j41(210,"span",11),t.EFF(211),t.k0s()(),t.j41(212,"div",12)(213,"div",13),t.EFF(214),t.k0s(),t.j41(215,"div",14)(216,"table",15)(217,"thead")(218,"tr")(219,"th",30),t.EFF(220,"Fecha"),t.k0s(),t.j41(221,"th",31),t.EFF(222,"N\xfamero"),t.k0s(),t.j41(223,"th",16),t.EFF(224,"Paciente"),t.k0s(),t.j41(225,"th",17),t.EFF(226,"Tel\xe9fono"),t.k0s(),t.j41(227,"th",19),t.EFF(228,"Doctor"),t.k0s(),t.j41(229,"th",18),t.EFF(230,"Especialidad"),t.k0s(),t.j41(231,"th",20),t.EFF(232,"Estado"),t.k0s()()(),t.j41(233,"tbody"),t.DNE(234,G,18,13,"tr",22),t.nI1(235,"slice"),t.DNE(236,N,3,0,"tr",23),t.k0s()()(),t.j41(237,"div",32)(238,"div",25)(239,"button",26),t.bIt("click",function(){return e.prevPage("canc")}),t.EFF(240,"Anterior"),t.k0s(),t.j41(241,"span"),t.EFF(242),t.k0s(),t.j41(243,"button",26),t.bIt("click",function(){return e.nextPage("canc")}),t.EFF(244,"Siguiente"),t.k0s()(),t.j41(245,"div",27)(246,"label"),t.EFF(247,"Por p\xe1gina"),t.k0s(),t.j41(248,"select",28),t.bIt("ngModelChange",function(r){return e.changeLimit("canc",r)}),t.j41(249,"option",29),t.EFF(250,"10"),t.k0s(),t.j41(251,"option",29),t.EFF(252,"20"),t.k0s(),t.j41(253,"option",29),t.EFF(254,"50"),t.k0s()()()()()()(),t.DNE(255,Y,26,10,"div",33),t.k0s()),2&o&&(t.R7$(6),t.R50("ngModel",e.searchTerm),t.R7$(8),t.SpI("(",t.i5U(15,73,e.today,"dd/MM/yyyy"),")"),t.R7$(3),t.JRh(e.filteredHoy.length),t.R7$(3),t.E5c("Mostrando ",(e.uiPageHoy-1)*e.uiLimitHoy+1,"\u2013",e.min(e.uiPageHoy*e.uiLimitHoy,e.filteredHoy.length)," de ",e.filteredHoy.length),t.R7$(18),t.Y8G("ngForOf",t.brH(39,76,e.filteredHoy,(e.uiPageHoy-1)*e.uiLimitHoy,e.uiPageHoy*e.uiLimitHoy)),t.R7$(2),t.Y8G("ngIf",0===e.filteredHoy.length),t.R7$(3),t.Y8G("disabled",1===e.uiPageHoy),t.R7$(3),t.Lme("P\xe1gina ",e.uiPageHoy," de ",e.getTotalPages("hoy")),t.R7$(),t.Y8G("disabled",e.uiPageHoy>=e.getTotalPages("hoy")),t.R7$(5),t.Y8G("ngModel",e.uiLimitHoy),t.R7$(),t.Y8G("ngValue",10),t.R7$(2),t.Y8G("ngValue",20),t.R7$(2),t.Y8G("ngValue",50),t.R7$(6),t.JRh(e.filteredProx.length),t.R7$(3),t.E5c("Mostrando ",(e.uiPageProx-1)*e.uiLimitProx+1,"\u2013",e.min(e.uiPageProx*e.uiLimitProx,e.filteredProx.length)," de ",e.filteredProx.length),t.R7$(22),t.Y8G("ngForOf",t.brH(89,80,e.filteredProx,(e.uiPageProx-1)*e.uiLimitProx,e.uiPageProx*e.uiLimitProx)),t.R7$(2),t.Y8G("ngIf",0===e.filteredProx.length),t.R7$(3),t.Y8G("disabled",1===e.uiPageProx),t.R7$(3),t.Lme("P\xe1gina ",e.uiPageProx," de ",e.getTotalPages("prox")),t.R7$(),t.Y8G("disabled",e.uiPageProx>=e.getTotalPages("prox")),t.R7$(5),t.Y8G("ngModel",e.uiLimitProx),t.R7$(),t.Y8G("ngValue",10),t.R7$(2),t.Y8G("ngValue",20),t.R7$(2),t.Y8G("ngValue",50),t.R7$(6),t.JRh(e.filteredPend.length),t.R7$(3),t.E5c("Mostrando ",(e.uiPagePend-1)*e.uiLimitPend+1,"\u2013",e.min(e.uiPagePend*e.uiLimitPend,e.filteredPend.length)," de ",e.filteredPend.length),t.R7$(22),t.Y8G("ngForOf",t.brH(139,84,e.filteredPend,(e.uiPagePend-1)*e.uiLimitPend,e.uiPagePend*e.uiLimitPend)),t.R7$(2),t.Y8G("ngIf",0===e.filteredPend.length),t.R7$(3),t.Y8G("disabled",1===e.uiPagePend),t.R7$(3),t.Lme("P\xe1gina ",e.uiPagePend," de ",e.getTotalPages("pend")),t.R7$(),t.Y8G("disabled",e.uiPagePend>=e.getTotalPages("pend")),t.R7$(5),t.Y8G("ngModel",e.uiLimitPend),t.R7$(),t.Y8G("ngValue",10),t.R7$(2),t.Y8G("ngValue",20),t.R7$(2),t.Y8G("ngValue",50),t.R7$(6),t.JRh(e.filteredConf.length),t.R7$(3),t.E5c("Mostrando ",(e.uiPageConf-1)*e.uiLimitConf+1,"\u2013",e.min(e.uiPageConf*e.uiLimitConf,e.filteredConf.length)," de ",e.filteredConf.length),t.R7$(20),t.Y8G("ngForOf",t.brH(187,88,e.filteredConf,(e.uiPageConf-1)*e.uiLimitConf,e.uiPageConf*e.uiLimitConf)),t.R7$(2),t.Y8G("ngIf",0===e.filteredConf.length),t.R7$(3),t.Y8G("disabled",1===e.uiPageConf),t.R7$(3),t.Lme("P\xe1gina ",e.uiPageConf," de ",e.getTotalPages("conf")),t.R7$(),t.Y8G("disabled",e.uiPageConf>=e.getTotalPages("conf")),t.R7$(5),t.Y8G("ngModel",e.uiLimitConf),t.R7$(),t.Y8G("ngValue",10),t.R7$(2),t.Y8G("ngValue",20),t.R7$(2),t.Y8G("ngValue",50),t.R7$(6),t.JRh(e.filteredCanc.length),t.R7$(3),t.E5c("Mostrando ",(e.uiPageCanc-1)*e.uiLimitCanc+1,"\u2013",e.min(e.uiPageCanc*e.uiLimitCanc,e.filteredCanc.length)," de ",e.filteredCanc.length),t.R7$(20),t.Y8G("ngForOf",t.brH(235,92,e.filteredCanc,(e.uiPageCanc-1)*e.uiLimitCanc,e.uiPageCanc*e.uiLimitCanc)),t.R7$(2),t.Y8G("ngIf",0===e.filteredCanc.length),t.R7$(3),t.Y8G("disabled",1===e.uiPageCanc),t.R7$(3),t.Lme("P\xe1gina ",e.uiPageCanc," de ",e.getTotalPages("canc")),t.R7$(),t.Y8G("disabled",e.uiPageCanc>=e.getTotalPages("canc")),t.R7$(5),t.Y8G("ngModel",e.uiLimitCanc),t.R7$(),t.Y8G("ngValue",10),t.R7$(2),t.Y8G("ngValue",20),t.R7$(2),t.Y8G("ngValue",50),t.R7$(2),t.Y8G("ngIf",e.actionModalOpen))},dependencies:[f.MD,f.YU,f.Sq,f.bT,m.YN,m.xH,m.y7,m.me,m.wz,m.BC,m.vS,f.P9,f.vh],styles:[".fichas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}[_ngcontent-%COMP%]:root{--brand-50: #eaf7ed;--brand-100: #d4f0d9;--brand-300: #9fe0a9;--brand-500: #53c06f;--brand-600: #45b665;--brand-700: #3a9e55;--muted-600: #6b8f76;--success-500: var(--brand-500);--danger-500: #ef4444}@media (min-width: 900px){.fichas-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.ficha-card[_ngcontent-%COMP%]{background:var(--white);border-radius:8px;padding:1rem;box-shadow:0 6px 18px #1018280f;border:1px solid rgba(16,24,40,.04);display:flex;flex-direction:column;min-height:120px}.ficha-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem;margin-bottom:.5rem}.ficha-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.05rem;color:#111827}.ficha-sub[_ngcontent-%COMP%]{color:#6b7280;font-size:.85rem}.table-wrapper[_ngcontent-%COMP%]{overflow:auto}table.app-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.95rem}table.app-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.app-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.8rem .9rem;text-align:left;border-bottom:1px solid rgba(15,23,42,.06);vertical-align:middle}table.app-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{min-height:56px}table.app-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table.app-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{line-height:1.4}.patient-cell[_ngcontent-%COMP%]{font-weight:600;color:var(--text-dark)}.patient-cell[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--text-dark);text-decoration:none}[data-theme=dark][_ngcontent-%COMP%]   .patient-cell[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.table-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.btn-accept[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-ghost[_ngcontent-%COMP%]{padding:.35rem .6rem;border-radius:6px;cursor:pointer}.btn-accept[_ngcontent-%COMP%]{background:#9fe0a9;color:#fff;border:1px solid rgba(0,0,0,.06)}.btn-accept[_ngcontent-%COMP%]:hover{filter:brightness(.98)}.btn-accept[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-cancel[_ngcontent-%COMP%]{background:#ef4444;color:#fff;border:1px solid rgba(0,0,0,.06)}.btn-cancel[_ngcontent-%COMP%]:hover{filter:brightness(.98)}.btn-cancel[_ngcontent-%COMP%]:active{transform:translateY(1px)}.btn-ghost[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(15,23,42,.06);padding:.35rem .6rem;border-radius:6px}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#02061780;display:flex;align-items:center;justify-content:center;z-index:1100}.modal[_ngcontent-%COMP%]{background:var(--white);padding:1rem;border-radius:8px;width:420px;max-width:calc(100% - 32px);box-shadow:0 12px 32px #02061729}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}@media (min-width: 900px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}.card.ficha[_ngcontent-%COMP%]{padding:0;border-radius:8px;overflow:hidden}.card-header[_ngcontent-%COMP%]{padding:.8rem 1rem;background:linear-gradient(180deg,#10a52d,#0caf21);font-weight:600;display:flex;align-items:center;justify-content:space-between}.card-body[_ngcontent-%COMP%]{padding:.6rem .9rem}table.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background:#f8fafc;z-index:5;padding:.8rem .9rem;text-align:left;border-bottom:1px solid rgba(15,23,42,.08)}table.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.8rem .9rem;vertical-align:middle;border-bottom:1px solid rgba(15,23,42,.04)}table.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background:#0f172a05}table.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#0206170a}.badge[_ngcontent-%COMP%]{display:inline-block;background:var(--brand-50);color:var(--brand-500);padding:.18rem .5rem;border-radius:999px;font-size:.82rem;font-weight:600}.btn-sm[_ngcontent-%COMP%]{padding:.28rem .5rem;font-size:.82rem}.btn-accept[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%], .btn-ghost[_ngcontent-%COMP%]{border-radius:6px}.admin-appointments[_ngcontent-%COMP%]   .btn-accept[_ngcontent-%COMP%]{background:#9fe0a9!important;color:#fff!important;border:1px solid rgba(0,0,0,.06)!important}.admin-appointments[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#ef4444!important;color:#fff!important;border:1px solid rgba(0,0,0,.06)!important}.btn-ghost[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(15,23,42,.06)}@media (max-width: 720px){table.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}table.table[_ngcontent-%COMP%], table.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], table.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}table.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:.75rem;background:var(--white);border-radius:8px;box-shadow:0 6px 14px #0206170a;padding:.6rem}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.45rem .6rem;border-bottom:none}table.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);display:block;font-weight:700;color:var(--muted-600);margin-bottom:.18rem}}.modal.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:.6rem .8rem;font-weight:700}.modal.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:.8rem}.modal.card[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.6rem;padding-top:.6rem}[_nghost-%COMP%]   .btn-accept[_ngcontent-%COMP%]{background:#9fe0a9!important;color:#fff!important;border:1px solid rgba(0,0,0,.06)!important}[_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#ef4444!important;color:#fff!important;border:1px solid rgba(0,0,0,.06)!important}[_nghost-%COMP%]   .badge[_ngcontent-%COMP%]{background:var(--brand-50)!important;color:var(--brand-700)!important}[_nghost-%COMP%]     .btn-cancel{background:#ef4444!important;color:#fff!important;border:1px solid rgba(0,0,0,.06)!important}[_nghost-%COMP%]     .btn-accept{background:#9fe0a9!important;color:#fff!important}table.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8fafc!important;color:#0f172a!important;border-bottom:1px solid rgba(15,23,42,.08)!important}[_nghost-%COMP%]   .btn-accept[_ngcontent-%COMP%], [_nghost-%COMP%]     .btn-accept{background:#9fe0a9!important;color:#fff!important;border:1px solid rgba(0,0,0,.06)!important}[_nghost-%COMP%]   .btn-cancel[_ngcontent-%COMP%], [_nghost-%COMP%]     .btn-cancel{background:#ef4444!important;color:#fff!important;border:1px solid rgba(0,0,0,.06)!important}.card-header--brand[_ngcontent-%COMP%]{background:linear-gradient(180deg,#39d75e,#5ed474)!important}.app-table--minwidth[_ngcontent-%COMP%]{min-width:980px}.text-wrap[_ngcontent-%COMP%]{white-space:normal;overflow-wrap:anywhere}.col-date[_ngcontent-%COMP%], .col-num[_ngcontent-%COMP%], .col-phone[_ngcontent-%COMP%], .col-status[_ngcontent-%COMP%], .col-actions[_ngcontent-%COMP%]{white-space:nowrap}.col-date[_ngcontent-%COMP%]{width:110px}.col-num[_ngcontent-%COMP%]{width:90px}.col-phone[_ngcontent-%COMP%], .col-status[_ngcontent-%COMP%]{width:120px}.col-actions[_ngcontent-%COMP%]{width:170px}.table-scroll[_ngcontent-%COMP%]{overflow-x:auto}.section-subtitle[_ngcontent-%COMP%]{color:var(--muted-600);font-size:.85rem;margin:.2rem 0 .5rem}.table-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem;padding-top:.5rem;margin-top:.5rem;border-top:1px solid rgba(15,23,42,.06)}.table-footer[_ngcontent-%COMP%]   .pager[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.table-footer[_ngcontent-%COMP%]   .page-size[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem}.table-footer[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.25rem .45rem;border-radius:6px;border:1px solid rgba(15,23,42,.18);background:var(--white)}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:.18rem .55rem;border-radius:999px;font-weight:600;font-size:.82rem;border:1px solid transparent}.status-pendiente[_ngcontent-%COMP%]{background:#fff7ed;color:#9a3412;border-color:#fb923c80}.status-confirmada[_ngcontent-%COMP%]{background:#ecfdf5;color:#065f46;border-color:#10b98180}.status-cancelada[_ngcontent-%COMP%]{background:#fef2f2;color:#7f1d1d;border-color:#ef444480}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0bc81e80;display:flex;align-items:center;justify-content:center;z-index:1100}"]})}return a})()}}]);
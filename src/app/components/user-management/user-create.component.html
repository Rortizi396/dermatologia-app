<div class="container mt-4">
  <h3>Crear Nuevo Usuario</h3>
  <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
    <div class="form-group mb-2">
      <label>Nombres</label>
      <input type="text" class="form-control" formControlName="nombres">
    </div>
    <div class="form-group mb-2">
      <label>Apellidos</label>
      <input type="text" class="form-control" formControlName="apellidos">
    </div>
    <div class="form-group mb-2">
      <label>Email</label>
      <input type="email" class="form-control" formControlName="correo">
    </div>
    <div class="form-group mb-2">
      <label>Contraseña</label>
      <div class="input-group">
        <input [type]="showPassword ? 'text' : 'password'" class="form-control" formControlName="password">
        <button type="button" class="btn btn-outline-secondary" (click)="showPassword = !showPassword" [attr.aria-pressed]="showPassword" [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'">
          <i class="fas" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
        </button>
      </div>
    </div>
    <div class="form-group mb-2">
      <label>Tipo de usuario</label>
      <select class="form-control" formControlName="tipo">
        <option *ngFor="let t of tipos" [value]="t.value">{{ t.label }}</option>
      </select>
    </div>
    <div class="form-group mb-2" *ngIf="userForm.value.tipo === 'paciente'">
      <label>DPI</label>
      <input type="text" class="form-control" formControlName="dpi">
    </div>
    <div class="form-group mb-2" *ngIf="userForm.value.tipo === 'doctor'">
      <label>Colegiado</label>
      <input type="text" class="form-control" formControlName="colegiado">
    </div>
    <div class="form-group mb-2" *ngIf="userForm.value.tipo === 'secretaria'">
      <label>ID Secretaria</label>
      <input type="text" class="form-control" formControlName="idSecretaria">
    </div>
    <div class="form-group mb-2" *ngIf="userForm.value.tipo === 'administrador'">
      <label>ID Administrador</label>
      <input type="text" class="form-control" formControlName="idAdministrador">
    </div>
    <div class="form-group mb-2">
      <label>Teléfono</label>
      <input type="text" class="form-control" formControlName="telefono">
    </div>
    <div class="form-group mb-2">
      <label>Activo</label>
      <input type="checkbox" formControlName="activo">
    </div>
    <button class="btn btn-success" type="submit" [disabled]="loading">Crear Usuario</button>
    <div *ngIf="error" class="alert alert-danger mt-2">{{ error }}</div>
    <div *ngIf="success" class="alert alert-success mt-2">{{ success }}</div>
  </form>
</div>

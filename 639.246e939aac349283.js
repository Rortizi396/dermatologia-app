"use strict";(self.webpackChunkdermatologia_app=self.webpackChunkdermatologia_app||[]).push([[639],{5639:(_,l,i)=>{i.r(l),i.d(l,{ForgotPasswordComponent:()=>p});var o=i(4341),c=i(8132),u=i(2200),r=i(3664),m=i(9330),d=i(3488);function f(a,h){if(1&a&&(r.j41(0,"div",13),r.EFF(1),r.k0s()),2&a){const s=r.XpG();r.R7$(),r.JRh(s.error)}}function g(a,h){if(1&a&&(r.j41(0,"div",14),r.EFF(1),r.k0s()),2&a){const s=r.XpG();r.R7$(),r.JRh(s.success)}}let p=(()=>{class a{fb;http;router;loading=!1;error=null;success=null;form;constructor(s,e,n){this.fb=s,this.http=e,this.router=n,this.form=this.fb.group({correo:["",[o.k0.required,o.k0.email]],nuevaContrasenia:["",[o.k0.required,o.k0.minLength(4)]],confirmar:["",[o.k0.required]]})}submit(){if(this.error=null,this.success=null,this.form.invalid)return void this.form.markAllAsTouched();const s=this.form.get("correo").value,e=this.form.get("nuevaContrasenia").value;e===this.form.get("confirmar").value?(this.loading=!0,this.http.post("/api/auth/reset-password",{correo:s,nuevaContrasenia:e}).subscribe({next:t=>{this.loading=!1,t&&t.success?(this.success="Contrase\xf1a actualizada correctamente. Puedes iniciar sesi\xf3n ahora.",setTimeout(()=>this.router.navigate(["/login"]),1500)):this.error=t&&t.message?t.message:"Error al actualizar la contrase\xf1a"},error:t=>{this.loading=!1,this.error=t&&t.error&&t.error.message?t.error.message:"Error de servidor"}})):this.error="Las contrase\xf1as no coinciden"}static \u0275fac=function(e){return new(e||a)(r.rXU(o.ok),r.rXU(m.Qq),r.rXU(d.Ix))};static \u0275cmp=r.VBU({type:a,selectors:[["app-forgot-password"]],decls:27,vars:4,consts:[[1,"forgot-password-card"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","email","formControlName","correo",1,"form-control"],["type","password","formControlName","nuevaContrasenia",1,"form-control"],["type","password","formControlName","confirmar",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/login",1,"btn","btn-link"],[1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(e,n){1&e&&(r.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),r.EFF(4,"Restablecer contrase\xf1a"),r.k0s(),r.j41(5,"small"),r.EFF(6,"Introduce tu correo y una nueva contrase\xf1a"),r.k0s()(),r.j41(7,"div",3)(8,"form",4),r.bIt("ngSubmit",function(){return n.submit()}),r.j41(9,"div",5)(10,"label"),r.EFF(11,"Correo electr\xf3nico"),r.k0s(),r.nrm(12,"input",6),r.k0s(),r.j41(13,"div",5)(14,"label"),r.EFF(15,"Nueva contrase\xf1a"),r.k0s(),r.nrm(16,"input",7),r.k0s(),r.j41(17,"div",5)(18,"label"),r.EFF(19,"Confirmar contrase\xf1a"),r.k0s(),r.nrm(20,"input",8),r.k0s(),r.DNE(21,f,2,1,"div",9)(22,g,2,1,"div",10),r.j41(23,"button",11),r.EFF(24,"Actualizar contrase\xf1a"),r.k0s(),r.j41(25,"a",12),r.EFF(26,"Cancelar"),r.k0s()()()()()),2&e&&(r.R7$(8),r.Y8G("formGroup",n.form),r.R7$(13),r.Y8G("ngIf",n.error),r.R7$(),r.Y8G("ngIf",n.success),r.R7$(),r.Y8G("disabled",n.loading))},dependencies:[u.MD,u.bT,o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,c.iI,c.Wk],styles:[".forgot-password-card[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.card[_ngcontent-%COMP%]{width:420px}"]})}return a})()}}]);
"use strict";(self.webpackChunkdermatologia_app=self.webpackChunkdermatologia_app||[]).push([[41],{4041:(F,l,n)=>{n.r(l),n.d(l,{RegisterComponent:()=>g});var e=n(9417),a=n(2200),m=n(8132),r=n(3664),u=n(9885),p=n(3488);const c=()=>["/login"];function d(o,_){if(1&o&&(r.j41(0,"div",19),r.EFF(1),r.k0s()),2&o){const t=r.XpG();r.R7$(),r.JRh(t.error)}}function f(o,_){if(1&o&&(r.j41(0,"div",20),r.EFF(1),r.k0s()),2&o){const t=r.XpG();r.R7$(),r.JRh(t.success)}}let g=(()=>{class o{fb;userService;router;registerForm;loading=!1;error="";success="";showPassword=!1;constructor(t,i,s){this.fb=t,this.userService=i,this.router=s,this.registerForm=this.fb.group({dpi:["",e.k0.required],nombres:["",e.k0.required],apellidos:["",e.k0.required],telefono:["",e.k0.required],correo:["",[e.k0.required,e.k0.email]],password:["",e.k0.required],activo:[!0]})}onSubmit(){this.registerForm.valid&&(this.loading=!0,this.error="",this.success="",this.userService.createUser({correo:this.registerForm.value.correo,password:this.registerForm.value.password,tipo:"paciente",nombres:this.registerForm.value.nombres,apellidos:this.registerForm.value.apellidos,telefono:this.registerForm.value.telefono,dpi:this.registerForm.value.dpi,activo:this.registerForm.value.activo}).subscribe({next:i=>{this.success="Registro exitoso. Ahora puedes iniciar sesi\xf3n.",this.loading=!1,setTimeout(()=>this.router.navigate(["/login"]),1500)},error:i=>{this.error=i.error?.message||"Error al registrar usuario",this.loading=!1}}))}static \u0275fac=function(i){return new(i||o)(r.rXU(e.ok),r.rXU(u.D),r.rXU(p.Ix))};static \u0275cmp=r.VBU({type:o,selectors:[["app-register"]],decls:38,vars:10,consts:[[1,"form-container"],[1,"form-title"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"form-label"],["type","text","formControlName","dpi",1,"form-input"],["type","text","formControlName","nombres",1,"form-input"],["type","text","formControlName","apellidos",1,"form-input"],["type","text","formControlName","telefono",1,"form-input"],["type","email","formControlName","correo",1,"form-input"],[1,"input-group"],["formControlName","password",1,"form-input","form-control",3,"type"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas",3,"ngClass"],["type","submit",1,"form-button",3,"disabled"],["class","form-error","style","margin-top: 0.5rem;",4,"ngIf"],["class","form-success","style","margin-top: 0.5rem;",4,"ngIf"],[1,"form-link",2,"margin-top","1rem"],[3,"routerLink"],[1,"form-error",2,"margin-top","0.5rem"],[1,"form-success",2,"margin-top","0.5rem"]],template:function(i,s){1&i&&(r.j41(0,"div",0)(1,"h2",1),r.EFF(2,"Registro de Paciente"),r.k0s(),r.j41(3,"form",2),r.bIt("ngSubmit",function(){return s.onSubmit()}),r.j41(4,"div",3)(5,"label",4),r.EFF(6,"DPI"),r.k0s(),r.nrm(7,"input",5),r.k0s(),r.j41(8,"div",3)(9,"label",4),r.EFF(10,"Nombres"),r.k0s(),r.nrm(11,"input",6),r.k0s(),r.j41(12,"div",3)(13,"label",4),r.EFF(14,"Apellidos"),r.k0s(),r.nrm(15,"input",7),r.k0s(),r.j41(16,"div",3)(17,"label",4),r.EFF(18,"Tel\xe9fono"),r.k0s(),r.nrm(19,"input",8),r.k0s(),r.j41(20,"div",3)(21,"label",4),r.EFF(22,"Email"),r.k0s(),r.nrm(23,"input",9),r.k0s(),r.j41(24,"div",3)(25,"label",4),r.EFF(26,"Contrase\xf1a"),r.k0s(),r.j41(27,"div",10),r.nrm(28,"input",11),r.j41(29,"button",12),r.bIt("click",function(){return s.showPassword=!s.showPassword}),r.nrm(30,"i",13),r.k0s()()(),r.j41(31,"button",14),r.EFF(32,"Registrarse"),r.k0s(),r.DNE(33,d,2,1,"div",15)(34,f,2,1,"div",16),r.k0s(),r.j41(35,"div",17)(36,"a",18),r.EFF(37,"\xbfYa tienes cuenta? Inicia sesi\xf3n"),r.k0s()()()),2&i&&(r.R7$(3),r.Y8G("formGroup",s.registerForm),r.R7$(25),r.Y8G("type",s.showPassword?"text":"password"),r.R7$(),r.BMQ("aria-pressed",s.showPassword)("aria-label",s.showPassword?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a"),r.R7$(),r.Y8G("ngClass",s.showPassword?"fa-eye-slash":"fa-eye"),r.R7$(),r.Y8G("disabled",s.loading),r.R7$(2),r.Y8G("ngIf",s.error),r.R7$(),r.Y8G("ngIf",s.success),r.R7$(2),r.Y8G("routerLink",r.lJ4(9,c)))},dependencies:[e.X1,e.qT,e.me,e.BC,e.cb,e.j4,e.JD,a.MD,a.YU,a.bT,m.iI,m.Wk,e.YN],encapsulation:2})}return o})()}}]);
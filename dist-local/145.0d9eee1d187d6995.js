"use strict";(self.webpackChunkdermatologia_app=self.webpackChunkdermatologia_app||[]).push([[145],{9145:(C,m,r)=>{r.r(m),r.d(m,{AdminPanelComponent:()=>E});var g=r(2200),d=r(9417),p=r(9763),s=r(2615),i=r(3664),u=r(9330),_=r(8397),v=r(3488);function h(o,l){1&o&&(i.j41(0,"span"),i.EFF(1,"Guardar"),i.k0s())}function b(o,l){1&o&&(i.j41(0,"span"),i.EFF(1,"Guardando..."),i.k0s())}function k(o,l){1&o&&(i.j41(0,"span"),i.EFF(1,"Guardar"),i.k0s())}function M(o,l){1&o&&(i.j41(0,"span"),i.EFF(1,"Guardando..."),i.k0s())}function f(o,l){if(1&o){const n=i.RV6();i.j41(0,"div")(1,"h3"),i.EFF(2,"Contenido del sitio"),i.k0s(),i.j41(3,"div",15)(4,"div",16)(5,"div",17)(6,"div",18)(7,"h5",19),i.EFF(8,"Misi\xf3n"),i.k0s(),i.j41(9,"div",20)(10,"label",21),i.EFF(11,"Misi\xf3n"),i.k0s(),i.j41(12,"textarea",22),i.mxI("ngModelChange",function(t){s.eBV(n);const a=i.XpG();return i.DH7(a.mission,t)||(a.mission=t),s.Njj(t)}),i.k0s()(),i.j41(13,"div",23)(14,"button",24),i.bIt("click",function(){s.eBV(n);const t=i.XpG();return s.Njj(t.saveMission())}),s.qSk(),i.j41(15,"svg",25),i.nrm(16,"polyline",26),i.k0s(),i.DNE(17,h,2,0,"span",14)(18,b,2,0,"span",14),i.k0s(),s.joV(),i.j41(19,"button",27),i.bIt("click",function(){s.eBV(n);const t=i.XpG();return s.Njj(t.cancelMission())}),s.qSk(),i.j41(20,"svg",25),i.nrm(21,"line",28)(22,"line",29),i.k0s(),i.EFF(23," Cancelar "),i.k0s()()()()(),s.joV(),i.j41(24,"div",16)(25,"div",17)(26,"div",18)(27,"h5",19),i.EFF(28,"Visi\xf3n"),i.k0s(),i.j41(29,"div",20)(30,"label",30),i.EFF(31,"Visi\xf3n"),i.k0s(),i.j41(32,"textarea",31),i.mxI("ngModelChange",function(t){s.eBV(n);const a=i.XpG();return i.DH7(a.vision,t)||(a.vision=t),s.Njj(t)}),i.k0s()(),i.j41(33,"div",23)(34,"button",24),i.bIt("click",function(){s.eBV(n);const t=i.XpG();return s.Njj(t.saveVision())}),s.qSk(),i.j41(35,"svg",25),i.nrm(36,"polyline",26),i.k0s(),i.DNE(37,k,2,0,"span",14)(38,M,2,0,"span",14),i.k0s(),s.joV(),i.j41(39,"button",27),i.bIt("click",function(){s.eBV(n);const t=i.XpG();return s.Njj(t.cancelVision())}),s.qSk(),i.j41(40,"svg",25),i.nrm(41,"line",28)(42,"line",29),i.k0s(),i.EFF(43," Cancelar "),i.k0s()()()()()()()}if(2&o){const n=i.XpG();i.R7$(12),i.R50("ngModel",n.mission),i.Y8G("disabled",n.isSavingMission),i.R7$(2),i.Y8G("disabled",n.isSavingMission),i.R7$(3),i.Y8G("ngIf",!n.isSavingMission),i.R7$(),i.Y8G("ngIf",n.isSavingMission),i.R7$(),i.Y8G("disabled",n.isSavingMission),i.R7$(13),i.R50("ngModel",n.vision),i.Y8G("disabled",n.isSavingVision),i.R7$(2),i.Y8G("disabled",n.isSavingVision),i.R7$(3),i.Y8G("ngIf",!n.isSavingVision),i.R7$(),i.Y8G("ngIf",n.isSavingVision),i.R7$(),i.Y8G("disabled",n.isSavingVision)}}function x(o,l){1&o&&(i.j41(0,"div"),i.nrm(1,"app-audit-history"),i.k0s())}let E=(()=>{class o{http;toast;route;view="none";selectedEntity="";entities=[{key:"pacientes",label:"Pacientes"},{key:"secretarias",label:"Secretarias"},{key:"doctores",label:"Doctores"},{key:"administradores",label:"Administradores"}];onSelectEntity(n){this.selectedEntity=n}mission="";vision="";isSavingMission=!1;isSavingVision=!1;originalMission="";originalVision="";constructor(n,e,t){this.http=n,this.toast=e,this.route=t,this.loadSettings(),this.route.queryParams.subscribe(a=>{const c=a.view;("mission"===c||"history"===c)&&(this.view=c)})}loadSettings(){this.http.get("/api/settings/mission").subscribe({next:n=>{this.mission=n&&n.value?n.value:""},error:n=>console.error("Error loading mission",n)}),this.http.get("/api/settings/vision").subscribe({next:n=>{this.vision=n&&n.value?n.value:""},error:n=>console.error("Error loading vision",n)})}saveMission(){this.isSavingMission=!0,this.originalMission=this.originalMission||this.mission,this.http.put("/api/settings/mission",{value:this.mission}).subscribe({next:()=>{this.toast.show("Misi\xf3n guardada","success"),this.isSavingMission=!1,this.originalMission=this.mission},error:n=>{console.error("Error saving mission",n),this.toast.show("Error al guardar misi\xf3n","error"),this.isSavingMission=!1}})}cancelMission(){this.http.get("/api/settings/mission").subscribe({next:n=>{this.mission=n&&n.value?n.value:"",this.toast.show("Cambios descartados","success")},error:n=>{console.error("Error reloading mission",n),this.toast.show("Error al recargar misi\xf3n","error")}})}saveVision(){this.isSavingVision=!0,this.originalVision=this.originalVision||this.vision,this.http.put("/api/settings/vision",{value:this.vision}).subscribe({next:()=>{this.toast.show("Visi\xf3n guardada","success"),this.isSavingVision=!1,this.originalVision=this.vision},error:n=>{console.error("Error saving vision",n),this.toast.show("Error al guardar visi\xf3n","error"),this.isSavingVision=!1}})}cancelVision(){this.http.get("/api/settings/vision").subscribe({next:n=>{this.vision=n&&n.value?n.value:"",this.toast.show("Cambios descartados","success")},error:n=>{console.error("Error reloading vision",n),this.toast.show("Error al recargar visi\xf3n","error")}})}saveSettings(){this.http.put("/api/settings/mission",{value:this.mission}).subscribe({next:()=>{this.toast.show("Misi\xf3n guardada","success"),this.http.put("/api/settings/vision",{value:this.vision}).subscribe({next:()=>this.toast.show("Visi\xf3n guardada","success"),error:n=>{console.error("Error saving vision",n),this.toast.show("Error al guardar visi\xf3n","error")}})},error:n=>{console.error("Error saving mission",n),this.toast.show("Error al guardar misi\xf3n","error")}})}static \u0275fac=function(e){return new(e||o)(i.rXU(u.Qq),i.rXU(_.f),i.rXU(v.nX))};static \u0275cmp=i.VBU({type:o,selectors:[["app-admin-panel"]],decls:29,vars:2,consts:[[1,"admin-panel","d-flex","gap-3"],[1,"admin-sidebar","p-2","d-flex","flex-column",2,"width","220px","height","100vh"],[1,"sidebar-box","mt-3",2,"flex","1"],[1,"list-group"],[1,"list-group-item","list-group-item-action","d-flex","align-items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"me-2"],["d","M12 2L2 7l10 5 10-5-10-5z"],["d","M2 17l10 5 10-5"],["d","M2 12l10 5 10-5"],["cx","12","cy","12","r","10"],["points","12 6 12 12 16 14"],[1,"sidebar-footer","mt-3"],[1,"flex-fill"],[1,"card","p-3"],[4,"ngIf"],[1,"row"],[1,"col-12","mb-3"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"form-group","mb-2"],["for","missionText",1,"visually-hidden"],["id","missionText","rows","6",1,"form-control",2,"width","100% !important","display","block","box-sizing","border-box","min-height","120px",3,"ngModelChange","ngModel","disabled"],[1,"d-flex","gap-2"],[1,"btn","btn-success","btn-compact",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.4",1,"btn-icon"],["points","20 6 9 17 4 12","stroke-linecap","round","stroke-linejoin","round"],[1,"btn","btn-outline-secondary","btn-compact",3,"click","disabled"],["x1","18","y1","6","x2","6","y2","18","stroke-linecap","round","stroke-linejoin","round"],["x1","6","y1","6","x2","18","y2","18","stroke-linecap","round","stroke-linejoin","round"],["for","visionText",1,"visually-hidden"],["id","visionText","rows","6",1,"form-control",2,"width","100% !important","display","block","box-sizing","border-box","min-height","120px",3,"ngModelChange","ngModel","disabled"]],template:function(e,t){1&e&&(i.j41(0,"div",0)(1,"aside",1)(2,"h4"),i.EFF(3,"Administraci\xf3n"),i.k0s(),i.j41(4,"div",2)(5,"div",3)(6,"button",4),i.bIt("click",function(){return t.view="mission"}),s.qSk(),i.j41(7,"svg",5),i.nrm(8,"path",6)(9,"path",7)(10,"path",8),i.k0s(),s.joV(),i.j41(11,"span"),i.EFF(12,"Misi\xf3n / Visi\xf3n"),i.k0s()(),i.j41(13,"button",4),i.bIt("click",function(){return t.view="history"}),s.qSk(),i.j41(14,"svg",5),i.nrm(15,"circle",9)(16,"polyline",10),i.k0s(),s.joV(),i.j41(17,"span"),i.EFF(18,"Historial de cambios"),i.k0s()()()(),i.nrm(19,"div",11),i.k0s(),i.j41(20,"main",12)(21,"div")(22,"h2"),i.EFF(23,"Administraci\xf3n"),i.k0s(),i.j41(24,"div",13)(25,"p"),i.EFF(26,"Seleccione una acci\xf3n desde la barra lateral para editar la Misi\xf3n/Visi\xf3n o ver el Historial de cambios."),i.k0s()()(),i.DNE(27,f,44,12,"div",14)(28,x,2,0,"div",14),i.k0s()()),2&e&&(i.R7$(27),i.Y8G("ngIf","mission"===t.view),i.R7$(),i.Y8G("ngIf","history"===t.view))},dependencies:[g.MD,g.bT,d.YN,d.me,d.BC,d.vS,p.N],styles:[".admin-panel[_ngcontent-%COMP%]{padding:2rem}.entity-selector[_ngcontent-%COMP%]{margin-bottom:1.5rem}select[_ngcontent-%COMP%]{padding:.5rem;border-radius:4px;border:1px solid #4caf50}.sidebar-box[_ngcontent-%COMP%]{background:transparent;border-radius:8px;padding:12px}.admin-sidebar[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px}.list-group[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{cursor:pointer}.quick-actions[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.quick-actions[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex:0 0 20px}"]})}return o})()}}]);
"use strict";(self.webpackChunkdermatologia_app=self.webpackChunkdermatologia_app||[]).push([[639],{5639:(_,u,i)=>{i.r(u),i.d(u,{ForgotPasswordComponent:()=>g});var t=i(9417),c=i(8132),l=i(2200),r=i(3664),m=i(9330),d=i(3488);function f(s,h){if(1&s&&(r.j41(0,"div",16),r.EFF(1),r.k0s()),2&s){const n=r.XpG();r.R7$(),r.JRh(n.error)}}function p(s,h){if(1&s&&(r.j41(0,"div",17),r.EFF(1),r.k0s()),2&s){const n=r.XpG();r.R7$(),r.JRh(n.success)}}let g=(()=>{class s{fb;http;router;loading=!1;error=null;success=null;form;showNew=!1;showConfirm=!1;constructor(n,a,o){this.fb=n,this.http=a,this.router=o,this.form=this.fb.group({correo:["",[t.k0.required,t.k0.email]],nuevaContrasenia:["",[t.k0.required,t.k0.minLength(4)]],confirmar:["",[t.k0.required]]})}submit(){if(this.error=null,this.success=null,this.form.invalid)return void this.form.markAllAsTouched();const n=this.form.get("correo").value,a=this.form.get("nuevaContrasenia").value;a===this.form.get("confirmar").value?(this.loading=!0,this.http.post("/api/auth/reset-password",{correo:n,nuevaContrasenia:a}).subscribe({next:e=>{this.loading=!1,e&&e.success?(this.success="Contrase\xf1a actualizada correctamente. Puedes iniciar sesi\xf3n ahora.",setTimeout(()=>this.router.navigate(["/login"]),1500)):this.error=e&&e.message?e.message:"Error al actualizar la contrase\xf1a"},error:e=>{this.loading=!1,this.error=e&&e.error&&e.error.message?e.error.message:"Error de servidor"}})):this.error="Las contrase\xf1as no coinciden"}static \u0275fac=function(a){return new(a||s)(r.rXU(t.ok),r.rXU(m.Qq),r.rXU(d.Ix))};static \u0275cmp=r.VBU({type:s,selectors:[["app-forgot-password"]],decls:33,vars:10,consts:[[1,"forgot-password-card"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","email","formControlName","correo",1,"form-control"],[1,"input-group"],["formControlName","nuevaContrasenia",1,"form-control",3,"type"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas",3,"ngClass"],["formControlName","confirmar",1,"form-control",3,"type"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["routerLink","/login",1,"btn","btn-link"],[1,"alert","alert-danger"],[1,"alert","alert-success"]],template:function(a,o){1&a&&(r.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),r.EFF(4,"Restablecer contrase\xf1a"),r.k0s(),r.j41(5,"small"),r.EFF(6,"Introduce tu correo y una nueva contrase\xf1a"),r.k0s()(),r.j41(7,"div",3)(8,"form",4),r.bIt("ngSubmit",function(){return o.submit()}),r.j41(9,"div",5)(10,"label"),r.EFF(11,"Correo electr\xf3nico"),r.k0s(),r.nrm(12,"input",6),r.k0s(),r.j41(13,"div",5)(14,"label"),r.EFF(15,"Nueva contrase\xf1a"),r.k0s(),r.j41(16,"div",7),r.nrm(17,"input",8),r.j41(18,"button",9),r.bIt("click",function(){return o.showNew=!o.showNew}),r.nrm(19,"i",10),r.k0s()()(),r.j41(20,"div",5)(21,"label"),r.EFF(22,"Confirmar contrase\xf1a"),r.k0s(),r.j41(23,"div",7),r.nrm(24,"input",11),r.j41(25,"button",9),r.bIt("click",function(){return o.showConfirm=!o.showConfirm}),r.nrm(26,"i",10),r.k0s()()(),r.DNE(27,f,2,1,"div",12)(28,p,2,1,"div",13),r.j41(29,"button",14),r.EFF(30,"Actualizar contrase\xf1a"),r.k0s(),r.j41(31,"a",15),r.EFF(32,"Cancelar"),r.k0s()()()()()),2&a&&(r.R7$(8),r.Y8G("formGroup",o.form),r.R7$(9),r.Y8G("type",o.showNew?"text":"password"),r.R7$(),r.BMQ("aria-pressed",o.showNew),r.R7$(),r.Y8G("ngClass",o.showNew?"fa-eye-slash":"fa-eye"),r.R7$(5),r.Y8G("type",o.showConfirm?"text":"password"),r.R7$(),r.BMQ("aria-pressed",o.showConfirm),r.R7$(),r.Y8G("ngClass",o.showConfirm?"fa-eye-slash":"fa-eye"),r.R7$(),r.Y8G("ngIf",o.error),r.R7$(),r.Y8G("ngIf",o.success),r.R7$(),r.Y8G("disabled",o.loading))},dependencies:[l.MD,l.YU,l.bT,t.X1,t.qT,t.me,t.BC,t.cb,t.j4,t.JD,c.iI,c.Wk],styles:[".forgot-password-card[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.card[_ngcontent-%COMP%]{width:420px}"]})}return s})()}}]);
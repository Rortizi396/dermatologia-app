"use strict";(self.webpackChunkdermatologia_app=self.webpackChunkdermatologia_app||[]).push([[41],{4041:(F,l,n)=>{n.r(l),n.d(l,{RegisterComponent:()=>v});var o=n(9417),a=n(2200),u=n(8132),e=n(3664),d=n(9885),p=n(5114);const f=()=>["/login"];function b(i,m){if(1&i&&(e.j41(0,"div",34),e.EFF(1),e.k0s()),2&i){const s=e.XpG();e.R7$(),e.JRh(s.error)}}function g(i,m){if(1&i&&(e.j41(0,"div",35),e.EFF(1),e.k0s()),2&i){const s=e.XpG();e.R7$(),e.JRh(s.success)}}function h(i,m){1&i&&e.nrm(0,"span",36)}let v=(()=>{class i{fb;userService;router;registerForm;loading=!1;error="";success="";showPassword=!1;showConfirm=!1;constructor(s,t,r){this.fb=s,this.userService=t,this.router=r,this.registerForm=this.fb.group({dpi:["",o.k0.required],nombres:["",o.k0.required],apellidos:["",o.k0.required],telefono:["",o.k0.required],correo:["",[o.k0.required,o.k0.email]],password:["",[o.k0.required,o.k0.minLength(4)]],confirmar:["",[o.k0.required]],activo:[!0]})}onSubmit(){if(this.registerForm.valid){if(this.registerForm.value.password!==this.registerForm.value.confirmar)return void(this.error="Las contrase\xf1as no coinciden");this.loading=!0,this.error="",this.success="",this.userService.createUser({correo:this.registerForm.value.correo,password:this.registerForm.value.password,tipo:"paciente",nombres:this.registerForm.value.nombres,apellidos:this.registerForm.value.apellidos,telefono:this.registerForm.value.telefono,dpi:this.registerForm.value.dpi,activo:this.registerForm.value.activo}).subscribe({next:t=>{this.success="Registro exitoso. Ahora puedes iniciar sesi\xf3n.",this.loading=!1,setTimeout(()=>this.router.navigate(["/login"]),1500)},error:t=>{this.error=t.error?.message||"Error al registrar usuario",this.loading=!1}})}}static \u0275fac=function(t){return new(t||i)(e.rXU(o.ok),e.rXU(d.D),e.rXU(p.Ix))};static \u0275cmp=e.VBU({type:i,selectors:[["app-register"]],decls:66,vars:15,consts:[[1,"register-card"],[1,"card","form-card"],[1,"card-header"],[1,"m-0"],[1,"muted"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"input-group","mb-2"],[1,"input-label"],[1,"input-with-icon"],[1,"bi","bi-credit-card-2-front","icon"],["type","text","formControlName","dpi","placeholder","0000 00000 0000",1,"input"],[1,"input-grid"],[1,"input-group"],[1,"bi","bi-person","icon"],["type","text","formControlName","nombres","placeholder","Nombre(s)",1,"input"],[1,"bi","bi-people","icon"],["type","text","formControlName","apellidos","placeholder","Apellido(s)",1,"input"],[1,"bi","bi-telephone","icon"],["type","text","formControlName","telefono","placeholder","(502) 5555-5555",1,"input"],[1,"bi","bi-envelope","icon"],["type","email","formControlName","correo","placeholder","tu@correo.com",1,"input"],[1,"bi","bi-lock","icon"],["formControlName","password","placeholder","M\xednimo 4 caracteres",1,"input",3,"type"],["type","button",1,"toggle-pass",3,"click"],[1,"bi",3,"ngClass"],[1,"bi","bi-lock-fill","icon"],["formControlName","confirmar","placeholder","Repite la contrase\xf1a",1,"input",3,"type"],["class","form-error mb-2",4,"ngIf"],["class","form-success mb-2",4,"ngIf"],["type","submit",1,"primary-btn",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],[1,"form-footer"],[1,"link",3,"routerLink"],[1,"form-error","mb-2"],[1,"form-success","mb-2"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,r){1&t&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4,"Registro de Paciente"),e.k0s(),e.j41(5,"small",4),e.EFF(6,"Crea tu cuenta para gestionar tus citas"),e.k0s()(),e.j41(7,"div",5)(8,"form",6),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(9,"div",7)(10,"label",8),e.EFF(11,"DPI"),e.k0s(),e.j41(12,"div",9),e.nrm(13,"i",10)(14,"input",11),e.k0s()(),e.j41(15,"div",12)(16,"div",13)(17,"label",8),e.EFF(18,"Nombres"),e.k0s(),e.j41(19,"div",9),e.nrm(20,"i",14)(21,"input",15),e.k0s()(),e.j41(22,"div",13)(23,"label",8),e.EFF(24,"Apellidos"),e.k0s(),e.j41(25,"div",9),e.nrm(26,"i",16)(27,"input",17),e.k0s()()(),e.j41(28,"div",12)(29,"div",13)(30,"label",8),e.EFF(31,"Tel\xe9fono"),e.k0s(),e.j41(32,"div",9),e.nrm(33,"i",18)(34,"input",19),e.k0s()(),e.j41(35,"div",13)(36,"label",8),e.EFF(37,"Correo electr\xf3nico"),e.k0s(),e.j41(38,"div",9),e.nrm(39,"i",20)(40,"input",21),e.k0s()()(),e.j41(41,"div",12)(42,"div",13)(43,"label",8),e.EFF(44,"Contrase\xf1a"),e.k0s(),e.j41(45,"div",9),e.nrm(46,"i",22)(47,"input",23),e.j41(48,"button",24),e.bIt("click",function(){return r.showPassword=!r.showPassword}),e.nrm(49,"i",25),e.k0s()()(),e.j41(50,"div",13)(51,"label",8),e.EFF(52,"Confirmar contrase\xf1a"),e.k0s(),e.j41(53,"div",9),e.nrm(54,"i",26)(55,"input",27),e.j41(56,"button",24),e.bIt("click",function(){return r.showConfirm=!r.showConfirm}),e.nrm(57,"i",25),e.k0s()()()(),e.DNE(58,b,2,1,"div",28)(59,g,2,1,"div",29),e.j41(60,"button",30),e.DNE(61,h,1,0,"span",31),e.EFF(62," Registrarse "),e.k0s(),e.j41(63,"div",32)(64,"a",33),e.EFF(65,"\xbfYa tienes cuenta? Inicia sesi\xf3n"),e.k0s()()()()()()),2&t&&(e.R7$(8),e.Y8G("formGroup",r.registerForm),e.R7$(39),e.Y8G("type",r.showPassword?"text":"password"),e.R7$(),e.BMQ("aria-pressed",r.showPassword)("aria-label",r.showPassword?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a"),e.R7$(),e.Y8G("ngClass",r.showPassword?"bi-eye-slash":"bi-eye"),e.R7$(6),e.Y8G("type",r.showConfirm?"text":"password"),e.R7$(),e.BMQ("aria-pressed",r.showConfirm)("aria-label",r.showConfirm?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a"),e.R7$(),e.Y8G("ngClass",r.showConfirm?"bi-eye-slash":"bi-eye"),e.R7$(),e.Y8G("ngIf",r.error),e.R7$(),e.Y8G("ngIf",r.success),e.R7$(),e.Y8G("disabled",r.loading),e.R7$(),e.Y8G("ngIf",r.loading),e.R7$(3),e.Y8G("routerLink",e.lJ4(14,f)))},dependencies:[o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,a.MD,a.YU,a.bT,u.iI,u.Wk,o.YN],encapsulation:2})}return i})()}}]);
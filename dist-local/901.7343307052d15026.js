"use strict";(self.webpackChunkdermatologia_app=self.webpackChunkdermatologia_app||[]).push([[901],{4901:(R,o,s)=>{s.r(o),s.d(o,{PatientPrescriptionsHistoryComponent:()=>E});var a=s(2200),c=s(8132),t=s(3664),d=s(4796),_=s(4882);const p=()=>["/dashboard/paciente"],m=i=>["/paciente/recetas",i];function g(i,n){if(1&i&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.JRh(e.message)}}function u(i,n){1&i&&(t.j41(0,"div"),t.EFF(1,"Cargando..."),t.k0s())}function v(i,n){1&i&&(t.j41(0,"div",10),t.EFF(1,"A\xfan no tienes recetas registradas."),t.k0s())}function f(i,n){if(1&i&&(t.j41(0,"div",15)(1,"strong"),t.EFF(2),t.k0s(),t.j41(3,"span",18),t.EFF(4),t.k0s(),t.j41(5,"div"),t.EFF(6),t.k0s()()),2&i){const e=n.$implicit;t.R7$(2),t.JRh(e.nombre),t.R7$(2),t.SpI("\u2014 ",e.cantidad," uds."),t.R7$(2),t.JRh(e.dosis)}}function h(i,n){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.DNE(4,f,7,3,"div",14),t.k0s(),t.j41(5,"td",15),t.EFF(6),t.k0s(),t.j41(7,"td",16)(8,"a",17),t.EFF(9,"Ver"),t.k0s()()()),2&i){const e=n.$implicit;t.R7$(2),t.JRh(e.fecha),t.R7$(2),t.Y8G("ngForOf",e.items),t.R7$(2),t.JRh(e.observaciones||"\u2014"),t.R7$(2),t.Y8G("routerLink",t.eq3(4,m,e.id))}}function F(i,n){if(1&i&&(t.j41(0,"div",11)(1,"table",12)(2,"thead")(3,"tr")(4,"th"),t.EFF(5,"Fecha"),t.k0s(),t.j41(6,"th"),t.EFF(7,"\xcdtems"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Observaciones"),t.k0s(),t.nrm(10,"th"),t.k0s()(),t.j41(11,"tbody"),t.DNE(12,h,10,6,"tr",13),t.k0s()()()),2&i){const e=t.XpG(2);t.R7$(12),t.Y8G("ngForOf",e.recetas)}}function P(i,n){if(1&i&&(t.j41(0,"div"),t.DNE(1,u,2,0,"div",6)(2,v,2,0,"div",8)(3,F,13,1,"div",9),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.loading),t.R7$(),t.Y8G("ngIf",!e.loading&&0===e.recetas.length),t.R7$(),t.Y8G("ngIf",e.recetas.length>0)}}let E=(()=>{class i{auth;rxSvc;myDpi="";recetas=[];loading=!1;message="";constructor(e,r){this.auth=e,this.rxSvc=r}ngOnInit(){const e=this.auth.currentUserValue;this.myDpi=e&&(e.dpi||e.usuario&&e.usuario.dpi)||"",this.myDpi?this.load():this.message="No se encontr\xf3 DPI en tu perfil. No podemos listar tu historial."}load(){this.loading=!0,this.rxSvc.list({paciente_dpi:this.myDpi,page:1,limit:100}).subscribe({next:e=>{this.recetas=e?.data||[],this.loading=!1},error:e=>{this.recetas=[],this.loading=!1}})}static \u0275fac=function(r){return new(r||i)(t.rXU(d.u),t.rXU(_.q))};static \u0275cmp=t.VBU({type:i,selectors:[["app-patient-prescriptions-history"]],decls:9,vars:4,consts:[[1,"container-xxl","py-3"],[1,"toolbar","d-flex","align-items-center","justify-content-between","p-2","mb-3","flex-wrap","gap-2"],[1,"m-0"],[1,"d-flex","align-items-center","gap-2"],[1,"btn","btn-outline-secondary",3,"routerLink"],["class","alert alert-warning",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-warning"],["class","text-muted small",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"text-muted","small"],[1,"table-responsive"],[1,"table","table-modern"],[4,"ngFor","ngForOf"],["class","small",4,"ngFor","ngForOf"],[1,"small"],[1,"text-end"],[1,"btn","btn-sm","btn-outline-primary",3,"routerLink"],[1,"text-muted"]],template:function(r,l){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h5",2),t.EFF(3,"Mi historial de recetas"),t.k0s(),t.j41(4,"div",3)(5,"a",4),t.EFF(6,"Regresar"),t.k0s()()(),t.DNE(7,g,2,1,"div",5)(8,P,4,3,"div",6),t.k0s()),2&r&&(t.R7$(5),t.Y8G("routerLink",t.lJ4(3,p)),t.R7$(2),t.Y8G("ngIf",l.message),t.R7$(),t.Y8G("ngIf",!l.message))},dependencies:[a.MD,a.Sq,a.bT,c.iI,c.Wk],styles:[".table-modern[_ngcontent-%COMP%]{width:100%}.table-modern[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table-modern[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}"]})}return i})()}}]);
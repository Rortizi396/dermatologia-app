"use strict";(self.webpackChunkdermatologia_app=self.webpackChunkdermatologia_app||[]).push([[639],{5639:(_,l,i)=>{i.r(l),i.d(l,{ForgotPasswordComponent:()=>h});var e=i(9417),d=i(8132),c=i(2200),r=i(3664),m=i(9330),f=i(5114);function p(t,u){if(1&t&&(r.j41(0,"div",20),r.EFF(1),r.k0s()),2&t){const a=r.XpG();r.R7$(),r.JRh(a.error)}}function g(t,u){if(1&t&&(r.j41(0,"div",21),r.EFF(1),r.k0s()),2&t){const a=r.XpG();r.R7$(),r.JRh(a.success)}}function b(t,u){1&t&&r.nrm(0,"span",22)}let h=(()=>{class t{fb;http;router;loading=!1;error=null;success=null;form;showNew=!1;showConfirm=!1;constructor(a,s,o){this.fb=a,this.http=s,this.router=o,this.form=this.fb.group({correo:["",[e.k0.required,e.k0.email]],nuevaContrasenia:["",[e.k0.required,e.k0.minLength(4)]],confirmar:["",[e.k0.required]]})}submit(){if(this.error=null,this.success=null,this.form.invalid)return void this.form.markAllAsTouched();const a=this.form.get("correo").value,s=this.form.get("nuevaContrasenia").value;s===this.form.get("confirmar").value?(this.loading=!0,this.http.post("/api/auth/reset-password",{correo:a,nuevaContrasenia:s}).subscribe({next:n=>{this.loading=!1,n&&n.success?(this.success="Contrase\xf1a actualizada correctamente. Puedes iniciar sesi\xf3n ahora.",setTimeout(()=>this.router.navigate(["/login"]),1500)):this.error=n&&n.message?n.message:"Error al actualizar la contrase\xf1a"},error:n=>{this.loading=!1,this.error=n&&n.error&&n.error.message?n.error.message:"Error de servidor"}})):this.error="Las contrase\xf1as no coinciden"}static \u0275fac=function(s){return new(s||t)(r.rXU(e.ok),r.rXU(m.Qq),r.rXU(f.Ix))};static \u0275cmp=r.VBU({type:t,selectors:[["app-forgot-password"]],decls:38,vars:13,consts:[[1,"forgot-password-card"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"input-with-icon"],[1,"bi","bi-envelope","icon"],["type","email","formControlName","correo","placeholder","tu@correo.com",1,"form-control","input"],[1,"bi","bi-lock","icon"],["formControlName","nuevaContrasenia","placeholder","M\xednimo 4 caracteres",1,"form-control","input",3,"type"],["type","button",1,"toggle-pass",3,"click"],[1,"bi",3,"ngClass"],[1,"bi","bi-lock-fill","icon"],["formControlName","confirmar","placeholder","Repite la contrase\xf1a",1,"form-control","input",3,"type"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["type","submit",1,"primary-btn",3,"disabled"],["class","spinner-border spinner-border-sm me-2",4,"ngIf"],["routerLink","/login",1,"btn","btn-link"],[1,"alert","alert-danger"],[1,"alert","alert-success"],[1,"spinner-border","spinner-border-sm","me-2"]],template:function(s,o){1&s&&(r.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),r.EFF(4,"Restablecer contrase\xf1a"),r.k0s(),r.j41(5,"small"),r.EFF(6,"Introduce tu correo y una nueva contrase\xf1a"),r.k0s()(),r.j41(7,"div",3)(8,"form",4),r.bIt("ngSubmit",function(){return o.submit()}),r.j41(9,"div",5)(10,"label"),r.EFF(11,"Correo electr\xf3nico"),r.k0s(),r.j41(12,"div",6),r.nrm(13,"i",7)(14,"input",8),r.k0s()(),r.j41(15,"div",5)(16,"label"),r.EFF(17,"Nueva contrase\xf1a"),r.k0s(),r.j41(18,"div",6),r.nrm(19,"i",9)(20,"input",10),r.j41(21,"button",11),r.bIt("click",function(){return o.showNew=!o.showNew}),r.nrm(22,"i",12),r.k0s()()(),r.j41(23,"div",5)(24,"label"),r.EFF(25,"Confirmar contrase\xf1a"),r.k0s(),r.j41(26,"div",6),r.nrm(27,"i",13)(28,"input",14),r.j41(29,"button",11),r.bIt("click",function(){return o.showConfirm=!o.showConfirm}),r.nrm(30,"i",12),r.k0s()()(),r.DNE(31,p,2,1,"div",15)(32,g,2,1,"div",16),r.j41(33,"button",17),r.DNE(34,b,1,0,"span",18),r.EFF(35," Actualizar contrase\xf1a "),r.k0s(),r.j41(36,"a",19),r.EFF(37,"Cancelar"),r.k0s()()()()()),2&s&&(r.R7$(8),r.Y8G("formGroup",o.form),r.R7$(12),r.Y8G("type",o.showNew?"text":"password"),r.R7$(),r.BMQ("aria-pressed",o.showNew)("aria-label",o.showNew?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a"),r.R7$(),r.Y8G("ngClass",o.showNew?"bi-eye-slash":"bi-eye"),r.R7$(6),r.Y8G("type",o.showConfirm?"text":"password"),r.R7$(),r.BMQ("aria-pressed",o.showConfirm)("aria-label",o.showConfirm?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a"),r.R7$(),r.Y8G("ngClass",o.showConfirm?"bi-eye-slash":"bi-eye"),r.R7$(),r.Y8G("ngIf",o.error),r.R7$(),r.Y8G("ngIf",o.success),r.R7$(),r.Y8G("disabled",o.loading),r.R7$(),r.Y8G("ngIf",o.loading))},dependencies:[c.MD,c.YU,c.bT,e.X1,e.qT,e.me,e.BC,e.cb,e.j4,e.JD,d.iI,d.Wk],styles:[".forgot-password-card[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:12px}.card[_ngcontent-%COMP%]{width:520px;max-width:100%;box-shadow:0 12px 30px #1f293714;border-radius:14px;overflow:hidden}.card-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--border-color,#eef3f4)}.input-with-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem;background:var(--surface,#fbfdfe);border:1px solid var(--border-color,#e6eef0);padding:.55rem .75rem;border-radius:10px}.input-with-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:var(--primary-600,#0ea5e9)}.input[_ngcontent-%COMP%]{border:none;outline:none;background:transparent;padding:.35rem 0;font-size:1rem;flex:1}.toggle-pass[_ngcontent-%COMP%]{border:none;background:transparent;color:#6b7280;cursor:pointer;border-radius:8px;padding:.25rem .35rem;display:inline-flex;align-items:center;justify-content:center}.toggle-pass[_ngcontent-%COMP%]:hover{background:#0000000d}.primary-btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;background:var(--primary,linear-gradient(90deg,#0ea5e9 0%, #0284c7 100%));color:#fff;padding:.75rem 1.1rem;border-radius:10px;border:none;font-weight:700;font-size:1rem;cursor:pointer}.primary-btn[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}[data-theme=dark][_ngcontent-%COMP%]   .input-with-icon[_ngcontent-%COMP%]{background:#ffffff0a;border-color:#ffffff40}[data-theme=dark][_ngcontent-%COMP%]   .toggle-pass[_ngcontent-%COMP%]{color:#fffc}[data-theme=dark][_ngcontent-%COMP%]   .toggle-pass[_ngcontent-%COMP%]:hover{background:#ffffff14}"]})}return t})()}}]);